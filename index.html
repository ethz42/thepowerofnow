<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å½“ä¸‹çš„åŠ›é‡ - æ·±åº¦ç†è§£æŒ‡å—</title>
    <style>
/* å¾®ä¿¡é£æ ¼ - å½“ä¸‹çš„åŠ›é‡ */

:root {
    /* å¾®ä¿¡è‰²å½©ç³»ç»Ÿ */
    --wx-green: #07C160;
    --wx-green-dark: #06AD56;
    --wx-green-light: rgba(7, 193, 96, 0.1);
    --wx-bg: #EDEDED;
    --wx-white: #FFFFFF;
    --wx-gray-1: #F7F7F7;
    --wx-gray-2: #E5E5E5;
    --wx-gray-3: #B2B2B2;
    --wx-gray-4: #999999;
    --wx-text-primary: #191919;
    --wx-text-secondary: #666666;
    --wx-text-tertiary: #B2B2B2;
    --wx-divider: #E7E7E7;
    
    /* é—´è·ç³»ç»Ÿ */
    --space-xs: 4px;
    --space-sm: 8px;
    --space-md: 12px;
    --space-lg: 16px;
    --space-xl: 24px;
    --space-2xl: 32px;
    
    /* å­—ä½“ */
    --font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "Helvetica Neue", Helvetica, Arial, sans-serif;
    
    /* åœ†è§’ */
    --radius: 8px;
    --radius-sm: 4px;
    --radius-lg: 12px;
    
    /* é˜´å½± */
    --shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
    --shadow-md: 0 2px 8px rgba(0, 0, 0, 0.08);
}

* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

body {
    font-family: var(--font-family);
    background: var(--wx-bg);
    color: var(--wx-text-primary);
    line-height: 1.6;
    -webkit-font-smoothing: antialiased;
}

/* å±å¹•å®¹å™¨ */
.screen {
    display: none;
    min-height: 100vh;
}

.screen.active {
    display: block;
}

/* æ¬¢è¿å±å¹• */
.welcome-container {
    min-height: 100vh;
    background: linear-gradient(135deg, #f5f7fa 0%, #ffffff 50%, #f0f9f6 100%);
    display: flex;
    align-items: center;
    justify-content: center;
    padding: var(--space-xl);
    position: relative;
    overflow: hidden;
}

.welcome-container::before {
    content: '';
    position: absolute;
    top: -50%;
    right: -10%;
    width: 500px;
    height: 500px;
    background: radial-gradient(circle, rgba(7, 193, 96, 0.05) 0%, transparent 70%);
    border-radius: 50%;
    animation: float 6s ease-in-out infinite;
}

.welcome-container::after {
    content: '';
    position: absolute;
    bottom: -30%;
    left: -10%;
    width: 400px;
    height: 400px;
    background: radial-gradient(circle, rgba(7, 193, 96, 0.03) 0%, transparent 70%);
    border-radius: 50%;
    animation: float 8s ease-in-out infinite reverse;
}

.value-proposition {
    max-width: 600px;
    width: 100%;
    position: relative;
    z-index: 1;
    animation: fadeIn 0.6s ease;
}

.book-title {
    font-size: 28px;
    font-weight: 500;
    color: var(--wx-text-primary);
    text-align: center;
    margin-bottom: var(--space-sm);
}

.book-subtitle {
    font-size: 14px;
    color: var(--wx-text-tertiary);
    text-align: center;
    margin-bottom: var(--space-2xl);
}

/* ç®€æ´çš„ä¿¡æ¯å¡ç‰‡ */
.book-intro,
.user-problem,
.solution {
    background: var(--wx-white);
    border: 1px solid var(--wx-divider);
    border-radius: var(--radius);
    padding: var(--space-lg);
    margin-bottom: var(--space-lg);
}

.book-intro .highlight {
    font-size: 15px;
    color: var(--wx-green);
    margin-bottom: var(--space-md);
    font-weight: 500;
}

.book-intro .description {
    font-size: 14px;
    color: var(--wx-text-secondary);
    line-height: 1.8;
}

.user-problem h3,
.solution h3 {
    font-size: 16px;
    font-weight: 500;
    color: var(--wx-text-primary);
    margin-bottom: var(--space-md);
}

.problems-list,
.benefits-list {
    display: flex;
    flex-direction: column;
    gap: var(--space-sm);
}

.problem-item,
.benefit-item {
    display: flex;
    align-items: flex-start;
    gap: var(--space-sm);
    padding: var(--space-md);
    background: var(--wx-gray-1);
    border-radius: var(--radius-sm);
    font-size: 14px;
    color: var(--wx-text-secondary);
}

.benefit-item {
    background: var(--wx-green-light);
}

.benefit-item .icon {
    font-size: 20px;
    flex-shrink: 0;
}

.benefit-text strong {
    display: block;
    color: var(--wx-text-primary);
    margin-bottom: var(--space-xs);
    font-size: 14px;
    font-weight: 500;
}

.benefit-text p {
    font-size: 13px;
    color: var(--wx-text-secondary);
    margin: 0;
}

/* MBTIé€‰æ‹© */
.mbti-section {
    margin-bottom: var(--space-xl);
}

.mbti-section details {
    background: var(--wx-white);
    border: 1px solid var(--wx-divider);
    border-radius: var(--radius);
    padding: var(--space-lg);
}

.mbti-section summary {
    font-size: 14px;
    color: var(--wx-text-secondary);
    cursor: pointer;
    list-style: none;
    user-select: none;
}

.mbti-section summary::-webkit-details-marker {
    display: none;
}

.mbti-selector {
    margin-top: var(--space-md);
}

.mbti-selector select {
    width: 100%;
    padding: var(--space-md);
    border: 1px solid var(--wx-divider);
    border-radius: var(--radius-sm);
    font-size: 14px;
    font-family: var(--font-family);
    background: var(--wx-white);
    color: var(--wx-text-primary);
}

/* å¾®ä¿¡ç»¿æŒ‰é’® */
.primary-btn {
    width: 100%;
    padding: var(--space-lg);
    background: linear-gradient(135deg, var(--wx-green), var(--wx-green-dark));
    color: white;
    border: none;
    border-radius: var(--radius);
    font-size: 16px;
    font-weight: 500;
    font-family: var(--font-family);
    cursor: pointer;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    box-shadow: 0 2px 8px rgba(7, 193, 96, 0.2);
    position: relative;
    overflow: hidden;
}

.primary-btn::before {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    width: 0;
    height: 0;
    border-radius: 50%;
    background: rgba(255, 255, 255, 0.3);
    transform: translate(-50%, -50%);
    transition: width 0.6s, height 0.6s;
}

.primary-btn:hover {
    background: linear-gradient(135deg, var(--wx-green-dark), var(--wx-green));
    box-shadow: 0 4px 16px rgba(7, 193, 96, 0.3);
    transform: translateY(-2px);
}

.primary-btn:hover::before {
    width: 300px;
    height: 300px;
}

.primary-btn:active {
    transform: translateY(0);
    box-shadow: 0 2px 8px rgba(7, 193, 96, 0.2);
}

.time-estimate {
    text-align: center;
    font-size: 13px;
    color: var(--wx-text-tertiary);
    margin-top: var(--space-md);
}

/* ä¸»å¯¼èˆª */
.main-nav {
    background: var(--wx-white);
    border-bottom: 1px solid var(--wx-divider);
    padding: 0 var(--space-lg);
    display: flex;
    justify-content: space-between;
    align-items: center;
    height: 56px;
    position: sticky;
    top: 0;
    z-index: 100;
    box-shadow: 0 1px 4px rgba(0, 0, 0, 0.04);
    backdrop-filter: blur(8px);
    -webkit-backdrop-filter: blur(8px);
}

.nav-brand {
    font-size: 16px;
    font-weight: 500;
    color: var(--wx-text-primary);
    display: flex;
    align-items: center;
    gap: var(--space-sm);
}

.nav-links {
    display: flex;
    gap: var(--space-md);
}

.nav-link {
    padding: var(--space-sm) var(--space-md);
    background: none;
    border: none;
    font-size: 14px;
    color: var(--wx-text-secondary);
    cursor: pointer;
    border-radius: var(--radius-sm);
    font-family: var(--font-family);
    transition: all 0.2s;
}

.nav-link.active {
    color: var(--wx-green);
    background: var(--wx-green-light);
}

.nav-link:hover:not(.active) {
    background: var(--wx-gray-1);
}

/* ä¸»å†…å®¹åŒº */
.main-content {
    padding: var(--space-lg);
    max-width: 1200px;
    margin: 0 auto;
}

.view {
    display: none;
}

.view.active {
    display: block;
}

/* é¡µé¢æ ‡é¢˜ */
.learning-header {
    margin-bottom: var(--space-2xl);
    text-align: center;
}

.learning-header h1 {
    font-size: 22px;
    font-weight: 500;
    color: var(--wx-text-primary);
    margin-bottom: var(--space-sm);
}

.learning-subtitle {
    font-size: 14px;
    color: var(--wx-text-secondary);
}

/* ä¹¦ç±æ´è§å¯¼èˆª */
.book-insights-nav {
    display: flex;
    gap: var(--space-sm);
    margin-bottom: var(--space-xl);
    padding: var(--space-sm);
    background: var(--wx-white);
    border-radius: var(--radius);
    overflow-x: auto;
}

.insight-nav-btn {
    padding: var(--space-sm) var(--space-lg);
    background: var(--wx-white);
    border: 1px solid var(--wx-divider);
    border-radius: var(--radius-sm);
    font-size: 14px;
    color: var(--wx-text-secondary);
    cursor: pointer;
    font-family: var(--font-family);
    white-space: nowrap;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    font-weight: 500;
    position: relative;
}

.insight-nav-btn.active {
    background: linear-gradient(135deg, var(--wx-green), var(--wx-green-dark));
    color: white;
    border-color: transparent;
    box-shadow: 0 2px 8px rgba(7, 193, 96, 0.3);
    transform: translateY(-2px);
}

.insight-nav-btn:hover:not(.active) {
    background: var(--wx-gray-1);
    transform: translateY(-1px);
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
}

/* ç« èŠ‚å¡ç‰‡ */
.chapter-grid,
.insights-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
    gap: var(--space-lg);
}

.chapter-card,
.insight-card {
    background: var(--wx-white);
    border: 1px solid var(--wx-divider);
    border-radius: var(--radius-lg);
    padding: var(--space-xl);
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    position: relative;
    overflow: hidden;
}

.chapter-card::after,
.insight-card::after {
    content: '';
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    height: 3px;
    background: linear-gradient(90deg, var(--wx-green), var(--wx-green-dark));
    transform: scaleX(0);
    transition: transform 0.3s ease;
}

.chapter-card:hover,
.insight-card:hover {
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.08);
    transform: translateY(-4px);
    border-color: var(--wx-green-light);
}

.chapter-card:hover::after,
.insight-card:hover::after {
    transform: scaleX(1);
}

.chapter-number {
    font-size: 12px;
    color: var(--wx-green);
    margin-bottom: var(--space-sm);
    font-weight: 500;
}

.chapter-card h3 {
    font-size: 16px;
    font-weight: 500;
    color: var(--wx-text-primary);
    margin-bottom: var(--space-md);
}

.chapter-proposition {
    font-size: 14px;
    color: var(--wx-text-primary);
    line-height: 1.6;
    margin-bottom: var(--space-md);
}

.chapter-meta {
    display: flex;
    flex-direction: column;
    gap: var(--space-sm);
    padding-top: var(--space-md);
    border-top: 1px solid var(--wx-divider);
}

.chapter-meta-item {
    font-size: 13px;
    color: var(--wx-text-secondary);
    line-height: 1.6;
}

.chapter-meta-item strong {
    color: var(--wx-text-primary);
}

/* ç»ˆæå‘½é¢˜ */
.ultimate-proposition {
    background: var(--wx-white);
    border: 1px solid var(--wx-divider);
    border-radius: var(--radius);
    padding: var(--space-2xl);
    text-align: center;
}

.ultimate-proposition h2 {
    font-size: 20px;
    font-weight: 500;
    color: var(--wx-text-primary);
    margin-bottom: var(--space-md);
}

.ultimate-statement {
    font-size: 18px;
    color: var(--wx-text-primary);
    line-height: 1.8;
    margin: var(--space-xl) 0;
    padding: var(--space-xl);
    background: var(--wx-green-light);
    border-radius: var(--radius);
}

.expansion-list {
    display: flex;
    flex-direction: column;
    gap: var(--space-sm);
    text-align: left;
    max-width: 600px;
    margin: var(--space-xl) auto 0;
}

.expansion-item {
    padding: var(--space-md);
    background: var(--wx-gray-1);
    border-radius: var(--radius-sm);
    border-left: 3px solid var(--wx-green);
    font-size: 14px;
    color: var(--wx-text-secondary);
}

/* è®ºè¯åœ°å›¾ */
.map-start-point {
    background: linear-gradient(135deg, var(--wx-white), var(--wx-gray-1));
    padding: var(--space-2xl);
    border-radius: var(--radius-lg);
    margin-bottom: var(--space-2xl);
    border: 2px solid var(--wx-green);
    box-shadow: 0 4px 16px rgba(7, 193, 96, 0.1);
    position: relative;
    overflow: hidden;
}

.map-start-point::before {
    content: 'ğŸ¯';
    position: absolute;
    top: var(--space-lg);
    right: var(--space-lg);
    font-size: 48px;
    opacity: 0.1;
}

.map-start-point h3 {
    color: var(--wx-green);
    font-size: 18px;
    font-weight: 600;
    margin-bottom: var(--space-md);
    display: flex;
    align-items: center;
    gap: var(--space-sm);
}

.map-start-point h3::before {
    content: 'ğŸš€';
    font-size: 20px;
}

.map-start-point p {
    font-size: 16px;
    line-height: 1.8;
    color: var(--wx-text-primary);
    position: relative;
    z-index: 1;
    font-weight: 500;
}

.argument-path {
    position: relative;
    padding-left: 40px;
    padding-top: var(--space-md);
}

.argument-path::before {
    content: '';
    position: absolute;
    left: 16px;
    top: 0;
    bottom: 0;
    width: 3px;
    background: linear-gradient(to bottom, var(--wx-green-light), var(--wx-divider));
    border-radius: 2px;
}

.landmark-card {
    position: relative;
    background: var(--wx-white);
    border: 1px solid var(--wx-divider);
    border-radius: var(--radius-lg);
    padding: var(--space-2xl);
    margin-bottom: var(--space-2xl);
    box-shadow: var(--shadow);
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

.landmark-card:hover {
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.08);
    transform: translateX(4px);
    border-color: var(--wx-green-light);
}

.landmark-card::before {
    content: '';
    position: absolute;
    left: -27px;
    top: 32px;
    width: 14px;
    height: 14px;
    background: linear-gradient(135deg, var(--wx-green), var(--wx-green-dark));
    border: 3px solid var(--wx-white);
    border-radius: 50%;
    box-shadow: 0 0 0 2px var(--wx-green-light);
    z-index: 2;
}

.landmark-title {
    font-size: 19px;
    font-weight: 600;
    color: var(--wx-text-primary);
    margin-bottom: var(--space-lg);
    padding-bottom: var(--space-md);
    border-bottom: 2px solid var(--wx-green-light);
    display: flex;
    align-items: center;
    gap: var(--space-sm);
}

.landmark-title::before {
    content: 'ğŸ“';
    font-size: 20px;
}

.landmark-argument {
    font-size: 16px;
    color: var(--wx-text-primary);
    line-height: 1.8;
    padding: var(--space-lg);
    background: linear-gradient(135deg, var(--wx-green-light), rgba(7, 193, 96, 0.05));
    border-radius: var(--radius);
    margin-bottom: var(--space-lg);
    border-left: 4px solid var(--wx-green);
    font-weight: 500;
}

.key-points {
    list-style: none;
    padding: 0;
    margin: var(--space-lg) 0;
    background: var(--wx-gray-1);
    border-radius: var(--radius);
    padding: var(--space-lg);
}

.key-points li {
    padding: var(--space-md) 0;
    padding-left: var(--space-xl);
    position: relative;
    font-size: 15px;
    color: var(--wx-text-primary);
    line-height: 1.7;
    border-bottom: 1px solid var(--wx-divider);
}

.key-points li:last-child {
    border-bottom: none;
}

.key-points li::before {
    content: 'âœ“';
    position: absolute;
    left: var(--space-sm);
    color: var(--wx-green);
    font-weight: bold;
    font-size: 16px;
}

.insight-box {
    padding: var(--space-lg);
    background: linear-gradient(135deg, #fff9e6, #fffef5);
    border-radius: var(--radius);
    border-left: 4px solid #ffa500;
    font-size: 15px;
    color: var(--wx-text-primary);
    margin: var(--space-lg) 0;
    line-height: 1.7;
    box-shadow: 0 2px 8px rgba(255, 165, 0, 0.1);
}

/* è®ºè¯åœ°å›¾å†…å®¹åŒºå—æ ‡é¢˜ */
.landmark-card h4 {
    font-size: 16px;
    font-weight: 600;
    color: var(--wx-green);
    margin-top: var(--space-lg);
    margin-bottom: var(--space-md);
    display: flex;
    align-items: center;
    gap: var(--space-sm);
}

.landmark-card h4::before {
    content: 'â–¸';
    font-size: 18px;
}

.next-step {
    font-size: 15px;
    color: var(--wx-green);
    font-weight: 500;
    margin-top: var(--space-lg);
    padding: var(--space-md) var(--space-lg);
    background: var(--wx-green-light);
    border-radius: var(--radius-sm);
    border: 1px dashed var(--wx-green);
    display: inline-block;
}

/* Key20æ´è§å¡ç‰‡ */
.insight-number {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 24px;
    height: 24px;
    background: var(--wx-green);
    color: white;
    border-radius: 50%;
    font-size: 12px;
    font-weight: 500;
    margin-bottom: var(--space-md);
}

.insight-card h3 {
    font-size: 16px;
    font-weight: 500;
    color: var(--wx-text-primary);
    margin-bottom: var(--space-md);
}

.insight-quote {
    margin: var(--space-md) 0;
}

.insight-en {
    font-size: 13px;
    color: var(--wx-text-tertiary);
    font-style: italic;
    margin-bottom: var(--space-xs);
}

.insight-zh {
    font-size: 15px;
    color: var(--wx-text-primary);
    font-weight: 500;
    line-height: 1.6;
}

.insight-analysis {
    font-size: 14px;
    color: var(--wx-text-secondary);
    line-height: 1.7;
    margin-top: var(--space-md);
}

.category-badge {
    display: inline-block;
    padding: var(--space-xs) var(--space-sm);
    background: var(--wx-gray-1);
    color: var(--wx-text-secondary);
    border-radius: var(--radius-sm);
    font-size: 12px;
    margin-top: var(--space-md);
}

/* å­¦ä¹ è·¯å¾„ */
.learning-path {
    max-width: 800px;
    margin: 0 auto;
}

.path-section {
    margin-bottom: var(--space-2xl);
}

.section-title {
    font-size: 18px;
    font-weight: 500;
    color: var(--wx-text-primary);
    margin-bottom: var(--space-sm);
    display: flex;
    align-items: center;
    gap: var(--space-sm);
}

.section-number {
    display: inline-block;
    padding: var(--space-xs) var(--space-md);
    background: var(--wx-green-light);
    color: var(--wx-green);
    border-radius: var(--radius-sm);
    font-size: 12px;
    font-weight: 500;
}

.section-intro {
    font-size: 14px;
    color: var(--wx-text-secondary);
    margin-bottom: var(--space-lg);
}

.concepts-in-section {
    display: flex;
    flex-direction: column;
    gap: var(--space-md);
}

.concept-card-new {
    background: var(--wx-white);
    border: 1px solid var(--wx-divider);
    border-radius: var(--radius-lg);
    padding: var(--space-xl);
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    position: relative;
    overflow: hidden;
}

.concept-card-new::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 4px;
    background: linear-gradient(90deg, var(--wx-green), var(--wx-green-dark));
    transform: scaleX(0);
    transform-origin: left;
    transition: transform 0.3s ease;
}

.concept-card-new:hover {
    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.08);
    transform: translateY(-2px);
    border-color: var(--wx-green-light);
}

.concept-card-new:hover::before {
    transform: scaleX(1);
}

.concept-card-new.locked {
    opacity: 0.6;
    background: var(--wx-gray-1);
}

.concept-card-new.locked:hover {
    transform: none;
    box-shadow: none;
}

.concept-card-new.completed {
    border-left: 4px solid var(--wx-green);
    background: linear-gradient(to right, var(--wx-green-light), var(--wx-white));
}

.concept-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: var(--space-sm);
}

.concept-header h3 {
    font-size: 16px;
    font-weight: 500;
    color: var(--wx-text-primary);
}

.status-badge {
    padding: var(--space-xs) var(--space-sm);
    border-radius: var(--radius-sm);
    font-size: 12px;
    background: var(--wx-gray-1);
    color: var(--wx-text-secondary);
    font-weight: 500;
    transition: all 0.2s ease;
}

.status-badge.completed {
    background: linear-gradient(135deg, var(--wx-green-light), rgba(7, 193, 96, 0.15));
    color: var(--wx-green);
    box-shadow: 0 2px 4px rgba(7, 193, 96, 0.1);
}

.status-badge.learning {
    background: linear-gradient(135deg, #fff3cd, #ffeaa7);
    color: #856404;
}

.status-badge.locked {
    opacity: 0.6;
}

.concept-description {
    font-size: 14px;
    color: var(--wx-text-secondary);
    margin-bottom: var(--space-md);
}

.concept-meta {
    display: flex;
    gap: var(--space-md);
    font-size: 13px;
    color: var(--wx-text-tertiary);
    margin-bottom: var(--space-md);
}

.start-learning-btn {
    width: 100%;
    padding: var(--space-md);
    background: var(--wx-green);
    color: white;
    border: none;
    border-radius: var(--radius-sm);
    font-size: 14px;
    font-family: var(--font-family);
    cursor: pointer;
    transition: background 0.2s;
}

.start-learning-btn:hover:not(:disabled) {
    background: var(--wx-green-dark);
}

.start-learning-btn:disabled {
    background: var(--wx-gray-2);
    color: var(--wx-text-tertiary);
    cursor: not-allowed;
}

/* å¿«é€Ÿç»ƒä¹  */
.quick-practice-section {
    background: var(--wx-white);
    border: 1px solid var(--wx-divider);
    border-radius: var(--radius);
    padding: var(--space-xl);
    margin-top: var(--space-2xl);
}

.quick-practice-section h3 {
    font-size: 16px;
    font-weight: 500;
    color: var(--wx-text-primary);
    margin-bottom: var(--space-sm);
}

.quick-practice-section > p {
    font-size: 14px;
    color: var(--wx-text-secondary);
    margin-bottom: var(--space-lg);
}

.quick-practices {
    display: flex;
    gap: var(--space-md);
}

.quick-practice-btn {
    flex: 1;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: var(--space-sm);
    padding: var(--space-lg);
    background: var(--wx-gray-1);
    border: 1px solid var(--wx-divider);
    border-radius: var(--radius);
    cursor: pointer;
    transition: all 0.2s;
}

.quick-practice-btn:hover {
    background: var(--wx-green-light);
    border-color: var(--wx-green);
}

.practice-icon {
    font-size: 24px;
}

.practice-name {
    font-size: 14px;
    font-weight: 500;
    color: var(--wx-text-primary);
}

.practice-time {
    font-size: 12px;
    color: var(--wx-text-tertiary);
}

/* å·¥å…·ç®± */
.tools-container h2 {
    font-size: 20px;
    font-weight: 500;
    color: var(--wx-text-primary);
    text-align: center;
    margin-bottom: var(--space-sm);
}

.tools-intro {
    text-align: center;
    font-size: 14px;
    color: var(--wx-text-secondary);
    margin-bottom: var(--space-xl);
}

.tools-sections {
    max-width: 1000px;
    margin: 0 auto;
}

.tool-section {
    margin-bottom: var(--space-2xl);
}

.tool-section h3 {
    font-size: 18px;
    font-weight: 500;
    color: var(--wx-text-primary);
    margin-bottom: var(--space-sm);
}

.tool-section > p {
    font-size: 14px;
    color: var(--wx-text-secondary);
    margin-bottom: var(--space-lg);
}

/* æ¨¡æ€æ¡† */
.modal {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0);
    z-index: 1000;
    align-items: center;
    justify-content: center;
    backdrop-filter: blur(0px);
    -webkit-backdrop-filter: blur(0px);
    transition: all 0.3s ease;
}

.modal.active {
    display: flex;
    background: rgba(0, 0, 0, 0.5);
    backdrop-filter: blur(4px);
    -webkit-backdrop-filter: blur(4px);
}

.modal-content {
    background: var(--wx-white);
    border-radius: var(--radius-lg);
    max-width: 90%;
    max-height: 90vh;
    overflow-y: auto;
    position: relative;
    animation: scaleIn 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
    padding: var(--space-xl);
}

.modal-content::-webkit-scrollbar {
    width: 8px;
}

.modal-content::-webkit-scrollbar-track {
    background: var(--wx-gray-1);
    border-radius: 4px;
}

.modal-content::-webkit-scrollbar-thumb {
    background: var(--wx-gray-3);
    border-radius: 4px;
}

.modal-content::-webkit-scrollbar-thumb:hover {
    background: var(--wx-gray-4);
}

.modal-close {
    position: sticky;
    top: 0;
    right: var(--space-lg);
    float: right;
    font-size: 28px;
    font-weight: 300;
    color: var(--wx-text-tertiary);
    background: none;
    border: none;
    cursor: pointer;
    padding: var(--space-sm);
    z-index: 10;
}

.modal-close:hover {
    color: var(--wx-text-primary);
}

/* å“åº”å¼ */
@media (max-width: 768px) {
    :root {
        --space-xl: 20px;
        --space-2xl: 28px;
    }

    .main-content {
        padding: var(--space-md);
    }
    
    .nav-links {
        gap: var(--space-xs);
    }
    
    .nav-link {
        padding: var(--space-xs) var(--space-sm);
        font-size: 12px;
    }

    .nav-brand {
        font-size: 14px;
    }
    
    .chapter-grid,
    .insights-grid {
        grid-template-columns: 1fr;
        gap: var(--space-md);
    }

    .chapter-card,
    .insight-card {
        padding: var(--space-lg);
    }
    
    .quick-practices {
        flex-direction: column;
    }
    
    .argument-path {
        padding-left: 24px;
    }

    .argument-path::before {
        left: 8px;
        width: 2px;
    }

    .landmark-card {
        padding: var(--space-lg);
        margin-bottom: var(--space-lg);
    }

    .landmark-card::before {
        left: -19px;
        top: 20px;
        width: 10px;
        height: 10px;
        border-width: 2px;
    }

    .landmark-title {
        font-size: 17px;
    }

    .landmark-argument {
        font-size: 15px;
        padding: var(--space-md);
    }

    .map-start-point {
        padding: var(--space-lg);
    }

    .map-start-point h3 {
        font-size: 16px;
    }

    .map-start-point p {
        font-size: 15px;
    }

    .key-points {
        padding: var(--space-md);
    }

    .key-points li {
        font-size: 14px;
        padding: var(--space-sm) 0;
        padding-left: var(--space-lg);
    }
    
    .book-insights-nav {
        overflow-x: scroll;
        -webkit-overflow-scrolling: touch;
        gap: var(--space-xs);
        padding: var(--space-xs);
    }

    .insight-nav-btn {
        padding: var(--space-xs) var(--space-md);
        font-size: 13px;
    }

    .modal-content {
        max-width: 95%;
        max-height: 95vh;
        padding: var(--space-lg);
    }

    .book-title {
        font-size: 24px;
    }

    .welcome-container {
        padding: var(--space-lg);
    }

    .value-proposition {
        max-width: 100%;
    }

    .game-area {
        min-height: 200px;
    }

    .thought-bubble {
        font-size: 13px;
        padding: var(--space-sm) var(--space-md);
    }

    .breathing-circle {
        width: 80px;
        height: 80px;
    }

    .timer-circle {
        width: 80px;
        height: 80px;
        font-size: 24px;
    }
}

@media (max-width: 480px) {
    .main-nav {
        height: 48px;
        padding: 0 var(--space-md);
    }

    .nav-link {
        padding: var(--space-xs);
        font-size: 11px;
    }

    .stat-card {
        flex-direction: column;
        text-align: center;
        gap: var(--space-md);
    }

    .concept-header {
        flex-direction: column;
        align-items: flex-start;
        gap: var(--space-sm);
    }
}

/* éšè—æ»šåŠ¨æ¡ä½†ä¿æŒåŠŸèƒ½ */
.book-insights-nav::-webkit-scrollbar {
    display: none;
}

.book-insights-nav {
    -ms-overflow-style: none;
    scrollbar-width: none;
}

/* æ¸¸æˆç»Ÿè®¡å’Œç»“æœå¢å¼º */
.game-stats {
    display: flex;
    justify-content: space-around;
    align-items: center;
    padding: var(--space-lg);
    background: linear-gradient(135deg, var(--wx-gray-1), var(--wx-white));
    border-radius: var(--radius);
    margin: var(--space-lg) 0;
    gap: var(--space-md);
}

.game-stats .stat {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: var(--space-xs);
    font-size: 14px;
    font-weight: 500;
    color: var(--wx-text-secondary);
}

.game-stats .timer {
    color: var(--wx-green);
    font-weight: 600;
}

.result-stats {
    display: flex;
    justify-content: space-around;
    margin: var(--space-xl) 0;
    gap: var(--space-md);
}

.result-item {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: var(--space-sm);
    padding: var(--space-lg);
    background: linear-gradient(135deg, var(--wx-gray-1), var(--wx-white));
    border-radius: var(--radius);
    flex: 1;
}

.result-label {
    font-size: 13px;
    color: var(--wx-text-secondary);
}

.result-value {
    font-size: 28px;
    font-weight: 600;
    color: var(--wx-green);
}

.result-insight {
    background: var(--wx-green-light);
    border-left: 3px solid var(--wx-green);
    padding: var(--space-lg);
    border-radius: var(--radius-sm);
    margin: var(--space-xl) 0;
}

.result-insight p {
    font-size: 15px;
    line-height: 1.6;
    color: var(--wx-text-primary);
    margin: 0;
}

.result-actions {
    display: flex;
    gap: var(--space-md);
    margin-top: var(--space-xl);
}

.result-actions button {
    flex: 1;
}

/* å¡ç‰‡æŒ‰é’®æ ·å¼ */
.card-btn {
    padding: var(--space-md) var(--space-lg);
    background: var(--wx-white);
    border: 1px solid var(--wx-divider);
    border-radius: var(--radius-sm);
    font-size: 14px;
    color: var(--wx-text-secondary);
    cursor: pointer;
    font-family: var(--font-family);
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    font-weight: 500;
}

.card-btn:hover {
    background: var(--wx-gray-1);
    border-color: var(--wx-green);
    color: var(--wx-text-primary);
    transform: translateY(-1px);
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
}

/* ç»ƒä¹ å®Œæˆæ ·å¼ */
.practice-completion {
    text-align: center;
    padding: var(--space-2xl) var(--space-lg);
}

.practice-completion h3 {
    font-size: 20px;
    font-weight: 500;
    color: var(--wx-text-primary);
    margin: var(--space-lg) 0;
}

.practice-completion p {
    font-size: 15px;
    color: var(--wx-text-secondary);
    line-height: 1.6;
}

.completion-actions {
    display: flex;
    gap: var(--space-md);
    margin-top: var(--space-xl);
    justify-content: center;
}

/* æ¸¸æˆå±å¹•å¢å¼º */
.game-screen,
.practice-screen {
    padding: var(--space-xl);
    max-width: 600px;
    margin: 0 auto;
}

.game-intro,
.practice-duration {
    text-align: center;
    color: var(--wx-text-secondary);
    line-height: 1.8;
    margin: var(--space-lg) 0;
}

.duration-badge {
    display: inline-block;
    padding: var(--space-xs) var(--space-sm);
    background: linear-gradient(135deg, var(--wx-green-light), rgba(7, 193, 96, 0.15));
    color: var(--wx-green);
    border-radius: var(--radius-sm);
    font-size: 12px;
    font-weight: 600;
    margin-top: var(--space-sm);
}

/* ç­‰çº§é€‰æ‹©å™¨ */
.level-selector {
    display: flex;
    flex-direction: column;
    gap: var(--space-md);
    margin-top: var(--space-xl);
}

.level-btn {
    padding: var(--space-lg);
    background: var(--wx-white);
    border: 2px solid var(--wx-divider);
    border-radius: var(--radius);
    font-size: 15px;
    font-weight: 500;
    color: var(--wx-text-primary);
    cursor: pointer;
    font-family: var(--font-family);
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

.level-btn:hover {
    border-color: var(--wx-green);
    background: var(--wx-green-light);
    transform: translateX(8px);
    box-shadow: 0 4px 12px rgba(7, 193, 96, 0.15);
}

/* å¢å¼ºçš„åŠ¨ç”»æ•ˆæœ */
@keyframes fadeIn {
    from {
        opacity: 0;
        transform: translateY(10px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

@keyframes slideInFromLeft {
    from {
        opacity: 0;
        transform: translateX(-20px);
    }
    to {
        opacity: 1;
        transform: translateX(0);
    }
}

@keyframes scaleIn {
    from {
        opacity: 0;
        transform: scale(0.95);
    }
    to {
        opacity: 1;
        transform: scale(1);
    }
}

@keyframes pulse {
    0%, 100% {
        transform: scale(1);
    }
    50% {
        transform: scale(1.05);
    }
}

@keyframes breathe {
    0%, 100% {
        transform: scale(1);
        opacity: 0.8;
    }
    50% {
        transform: scale(1.1);
        opacity: 1;
    }
}

@keyframes float {
    0%, 100% {
        transform: translateY(0);
    }
    50% {
        transform: translateY(-10px);
    }
}

.insight-section.active {
    animation: fadeIn 0.4s ease;
}

.chapter-card {
    animation: fadeIn 0.4s ease;
    animation-fill-mode: both;
}

.chapter-card:nth-child(1) { animation-delay: 0.05s; }
.chapter-card:nth-child(2) { animation-delay: 0.1s; }
.chapter-card:nth-child(3) { animation-delay: 0.15s; }
.chapter-card:nth-child(4) { animation-delay: 0.2s; }
.chapter-card:nth-child(5) { animation-delay: 0.25s; }

/* å‘¼å¸åœ†åœˆåŠ¨ç”» */
.breathing-circle {
    width: 120px;
    height: 120px;
    background: linear-gradient(135deg, var(--wx-green), var(--wx-green-dark));
    border-radius: 50%;
    animation: breathe 4s ease-in-out infinite;
    box-shadow: 0 4px 20px rgba(7, 193, 96, 0.3);
}

.breathing-circle-container {
    display: flex;
    justify-content: center;
    align-items: center;
    padding: var(--space-2xl);
}

/* æ€ç»´æ°”æ³¡åŠ¨ç”» */
.thought-bubble {
    position: absolute;
    padding: var(--space-md) var(--space-lg);
    background: var(--wx-white);
    border: 1px solid var(--wx-divider);
    border-radius: var(--radius-lg);
    font-size: 14px;
    color: var(--wx-text-primary);
    cursor: pointer;
    transition: all 0.3s ease;
    animation: float 3s ease-in-out infinite;
    box-shadow: var(--shadow);
}

.thought-bubble:hover {
    transform: scale(1.05);
    box-shadow: var(--shadow-md);
    border-color: var(--wx-green);
}

.thought-bubble.identified {
    background: linear-gradient(135deg, #ff6b6b, #ee5a6f);
    color: white;
    border-color: transparent;
    animation: pulse 0.3s ease;
}

.thought-bubble.observed {
    background: linear-gradient(135deg, var(--wx-green-light), rgba(7, 193, 96, 0.2));
    border-color: var(--wx-green);
    opacity: 0;
}

/* æ¸¸æˆåŒºåŸŸ */
.game-area {
    position: relative;
    min-height: 300px;
    background: linear-gradient(to bottom, var(--wx-gray-1), var(--wx-white));
    border-radius: var(--radius);
    margin: var(--space-xl) 0;
    border: 2px dashed var(--wx-divider);
}

.distraction-area {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    pointer-events: none;
}

.distraction-text {
    position: absolute;
    padding: var(--space-sm) var(--space-md);
    background: rgba(255, 107, 107, 0.9);
    color: white;
    border-radius: var(--radius-sm);
    font-size: 13px;
    animation: fadeIn 0.5s ease;
}

/* è¿›åº¦æ¡å¢å¼º */
.progress-bar {
    width: 100%;
    height: 8px;
    background: var(--wx-gray-2);
    border-radius: 4px;
    overflow: hidden;
    margin: var(--space-md) 0;
}

.progress-fill {
    height: 100%;
    background: linear-gradient(90deg, var(--wx-green), var(--wx-green-dark));
    border-radius: 4px;
    transition: width 0.5s ease;
    box-shadow: 0 0 10px rgba(7, 193, 96, 0.3);
}

/* è®¡æ—¶å™¨åœ†åœˆ */
.timer-circle {
    width: 100px;
    height: 100px;
    background: linear-gradient(135deg, var(--wx-green-light), rgba(7, 193, 96, 0.2));
    border: 4px solid var(--wx-green);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 32px;
    font-weight: 500;
    color: var(--wx-green);
    margin: var(--space-xl) auto;
    animation: pulse 2s ease-in-out infinite;
}

/* å¡ç‰‡æ‚¬åœæ•ˆæœå¢å¼º */
.game-card,
.practice-card {
    background: var(--wx-white);
    border: 1px solid var(--wx-divider);
    border-radius: var(--radius);
    padding: var(--space-xl);
    cursor: pointer;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    position: relative;
    overflow: hidden;
}

.game-card::before,
.practice-card::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(7, 193, 96, 0.1), transparent);
    transition: left 0.5s ease;
}

.game-card:hover::before,
.practice-card:hover::before {
    left: 100%;
}

.game-card:hover,
.practice-card:hover {
    transform: translateY(-4px);
    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.12);
    border-color: var(--wx-green);
}

/* å®ŒæˆåŠ¨ç”» */
.completion-icon {
    font-size: 64px;
    animation: scaleIn 0.5s ease;
}

/* æ—¶é—´çº¿æ ·å¼ */
.timeline-item {
    background: var(--wx-white);
    border: 1px solid var(--wx-divider);
    border-left: 3px solid var(--wx-green);
    border-radius: var(--radius-sm);
    padding: var(--space-md);
    margin-bottom: var(--space-md);
    animation: slideInFromLeft 0.3s ease;
    transition: all 0.2s ease;
}

.timeline-item:hover {
    box-shadow: var(--shadow-md);
    transform: translateX(4px);
}

.timeline-date {
    font-size: 12px;
    color: var(--wx-text-tertiary);
    margin-bottom: var(--space-xs);
}

.timeline-type {
    font-size: 14px;
    font-weight: 500;
    color: var(--wx-green);
    margin-bottom: var(--space-xs);
}

.timeline-text {
    font-size: 14px;
    color: var(--wx-text-secondary);
}
    </style>
</head>
<body>
    <!-- æ¬¢è¿å±å¹• -->
    <div id="welcomeScreen" class="screen active">
        <div class="welcome-container">
            <div class="value-proposition">
                <h1 class="book-title">ã€Šå½“ä¸‹çš„åŠ›é‡ã€‹</h1>                
                <div class="book-intro">
                    <p class="highlight">ğŸ“– å…¨çƒé”€é‡è¶…è¿‡500ä¸‡å†Œçš„å¿ƒç†ç–—æ„ˆç»å…¸</p>
                    <p class="description">
                        <strong>æ ¸å¿ƒçœŸç†</strong>ï¼šå½“ä¸‹æ˜¯å”¯ä¸€çœŸå®çš„æ—¶åˆ»ï¼Œ<br>
                        ä¸´åœ¨äºå½“ä¸‹ï¼Œå°±æ˜¯ä»æ€ç»´åˆ¶é€ çš„ç—›è‹¦ä¸­è§£è„±ã€‚
                    </p>
                </div>

                <div class="user-problem">
                    <h3>ä½†è¿™æœ¬ä¹¦å¾ˆéš¾è¯»æ‡‚...</h3>
                    <div class="problems-list">
                        <div class="problem-item">âŒ æ¦‚å¿µå¤ªæŠ½è±¡ï¼ˆä¸´åœ¨ã€å°æˆ‘ã€æœ¬ä½“...ï¼‰</div>
                        <div class="problem-item">âŒ ä¸çŸ¥é“æ€ä¹ˆç»ƒä¹ </div>
                        <div class="problem-item">âŒ è¯»äº†å¾ˆå¤šéè¿˜æ˜¯ä¸æ‡‚</div>
                    </div>
                </div>

                <div class="solution">
                    <h3>è¿™ä¸ªå·¥å…·ä¼šå¸®ä½ ï¼š</h3>
                    <div class="benefits-list">
                        <div class="benefit-item">
                            <span class="icon">ğŸ“š</span>
                            <div class="benefit-text">
                                <strong>æ·±åº¦ç†è§£å…¨ä¹¦</strong>
                                <p>10ç« æ ¸å¿ƒå‘½é¢˜ + è®ºè¯åœ°å›¾ + 20ä¸ªåå¸¸è¯†æ´è§</p>
                            </div>
                        </div>
                        <div class="benefit-item">
                            <span class="icon">ğŸ¯</span>
                            <div class="benefit-text">
                                <strong>ç³»ç»Ÿå­¦ä¹ è·¯å¾„</strong>
                                <p>5ä¸ªæ ¸å¿ƒæ¦‚å¿µï¼Œè‡ªç”±é€‰æ‹©å­¦ä¹ é¡ºåº</p>
                            </div>
                        </div>
                        <div class="benefit-item">
                            <span class="icon">ğŸ®</span>
                            <div class="benefit-text">
                                <strong>ä½“éªŒå¼æ·±åŒ–</strong>
                                <p>æ¸¸æˆå’Œç»ƒä¹ è®©æŠ½è±¡æ¦‚å¿µå˜å¾—å¯æ„ŸçŸ¥</p>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="mbti-section">
                    <details>
                        <summary>ğŸ¯ é€‰æ‹©ä½ çš„å­¦ä¹ é£æ ¼ï¼ˆå¯é€‰ï¼‰</summary>
                        <div class="mbti-selector">
                            <select id="mbtiSelect">
                                <option value="">é€šç”¨ç‰ˆæœ¬</option>
                                <optgroup label="åˆ†æå¸ˆ (NT)">
                                    <option value="INTJ">INTJ</option>
                                    <option value="INTP">INTP</option>
                                    <option value="ENTJ">ENTJ</option>
                                    <option value="ENTP">ENTP</option>
                                </optgroup>
                                <optgroup label="å¤–äº¤å®˜ (NF)">
                                    <option value="INFJ">INFJ</option>
                                    <option value="INFP">INFP</option>
                                    <option value="ENFJ">ENFJ</option>
                                    <option value="ENFP">ENFP</option>
                                </optgroup>
                                <optgroup label="å®ˆæŠ¤è€… (SJ)">
                                    <option value="ISTJ">ISTJ</option>
                                    <option value="ISFJ">ISFJ</option>
                                    <option value="ESTJ">ESTJ</option>
                                    <option value="ESFJ">ESFJ</option>
                                </optgroup>
                                <optgroup label="æ¢é™©å®¶ (SP)">
                                    <option value="ISTP">ISTP</option>
                                    <option value="ISFP">ISFP</option>
                                    <option value="ESTP">ESTP</option>
                                    <option value="ESFP">ESFP</option>
                                </optgroup>
                            </select>
                        </div>
                    </details>
                </div>

                <button class="primary-btn large" id="startBtn">
                    å¼€å§‹æ·±åº¦ç†è§£è¿™æœ¬ä¹¦ â†’
                </button>
                <p class="time-estimate">ç³»ç»ŸåŒ–çš„ä¹¦ç±æ´è§ + å¯ä½“éªŒçš„å­¦ä¹ è·¯å¾„</p>
            </div>
        </div>
    </div>

    <!-- ä¸»åº”ç”¨é¡µé¢ -->
    <div id="homeScreen" class="screen">
        <nav class="main-nav">
            <div class="nav-brand">
                <span class="book-icon">ğŸ“–</span>
                å½“ä¸‹çš„åŠ›é‡
            </div>
            <div class="nav-links">
                <button class="nav-link active" data-view="book">ç†è§£å…¨ä¹¦</button>
                <button class="nav-link" data-view="learn">å­¦ä¹ æ¦‚å¿µ</button>
                <button class="nav-link" data-view="tools">å·¥å…·ç®±</button>
            </div>
        </nav>

        <main class="main-content">
            <!-- ç†è§£å…¨ä¹¦è§†å›¾ -->
            <div id="bookView" class="view active">
                <div class="learning-header">
                    <h1>æ·±åº¦ç†è§£ã€Šå½“ä¸‹çš„åŠ›é‡ã€‹</h1>
                    <p class="learning-subtitle">ç³»ç»ŸåŒ–çš„æ´è§åœ°å›¾ï¼Œè®©æ™¦æ¶©çš„æ™ºæ…§å˜å¾—æ¸…æ™°</p>
                </div>

                <!-- ä¹¦ç±æ´è§å¯¼èˆª -->
                <div class="book-insights-nav">
                    <button class="insight-nav-btn active" data-section="chapters">ç« èŠ‚å‘½é¢˜</button>
                    <button class="insight-nav-btn" data-section="ultimate">ç»ˆæå‘½é¢˜</button>
                    <button class="insight-nav-btn" data-section="map">è®ºè¯åœ°å›¾</button>
                    <button class="insight-nav-btn" data-section="key20">å…³é”®æ´è§</button>
                </div>

                <!-- ç« èŠ‚æ ¸å¿ƒå‘½é¢˜ -->
                <div id="chaptersSection" class="insight-section active">
                    <h2 style="font-family: var(--font-serif); color: var(--color-bamboo); margin-bottom: var(--spacing-lg);">
                        10ç« æ ¸å¿ƒå‘½é¢˜
                    </h2>
                    <p style="color: var(--color-earth); margin-bottom: var(--spacing-xl);">
                        æ¯ä¸ªç« èŠ‚èƒŒåçš„æ ¸å¿ƒå‘½é¢˜ï¼Œå¿«é€Ÿç†è§£æ¯ç« å›ç­”äº†ä»€ä¹ˆé—®é¢˜ï¼Œé¢ è¦†äº†ä½•ç§è§‚ç‚¹
                    </p>
                    <div id="chaptersGrid" class="chapter-grid"></div>
                </div>

                <!-- ç»ˆææ ¸å¿ƒå‘½é¢˜ -->
                <div id="ultimateSection" class="insight-section">
                    <div class="ultimate-proposition">
                        <h2>ç»ˆææ ¸å¿ƒå‘½é¢˜</h2>
                        <p style="color: var(--color-earth); margin-bottom: var(--spacing-lg);">
                            ä¸€ä¸ªèƒ½æé¢†å…¨ä¹¦çš„æ„ä¹‰é»‘æ´ï¼Œå¯ä»¥æ— é™æ‰©å±•çš„æ™ºæ…§æºå¤´
                        </p>
                        <div id="ultimateContent"></div>
                    </div>
                </div>

                <!-- è®ºè¯åœ°å›¾ -->
                <div id="mapSection" class="insight-section">
                    <div class="learning-header">
                        <h2>è®ºè¯åœ°å›¾</h2>
                        <p class="learning-subtitle">ä»èµ·ç‚¹åˆ°ç»ˆç‚¹ï¼Œ6ä¸ªåœ°æ ‡æ„æˆæ¸…æ™°çš„ç†è§£è·¯å¾„</p>
                    </div>

                    <div class="map-start-point">
                        <h3>èµ·ç‚¹</h3>
                        <p id="startPoint"></p>
                    </div>
                    
                    <div id="landmarksPath" class="argument-path"></div>
                </div>

                <!-- Key20 æ´è§ -->
                <div id="key20Section" class="insight-section">
                    <h2 style="font-family: var(--font-serif); color: var(--color-bamboo); margin-bottom: var(--spacing-md);">
                        Key20ï¼š20ä¸ªåå¸¸è¯†æ´è§
                    </h2>
                    <p style="color: var(--color-earth); margin-bottom: var(--spacing-xl);">
                        ç²¾é€‰æœ€é¢ è¦†æ€§çš„å‘½é¢˜ï¼Œä¸­è‹±å¯¹ç…§ + æ·±åº¦è§£æ
                    </p>
                    <div id="key20Grid" class="insights-grid"></div>
                </div>
            </div>

            <!-- å­¦ä¹ æ¦‚å¿µè§†å›¾ï¼ˆä¿ç•™ä¹‹å‰çš„ï¼‰ -->
            <div id="learnView" class="view">
                <div class="learning-header">
                    <h1>ç³»ç»Ÿå­¦ä¹ æ ¸å¿ƒæ¦‚å¿µ</h1>
                    <p class="learning-subtitle">è‡ªç”±é€‰æ‹©å­¦ä¹ é¡ºåºï¼Œæƒ³å­¦å“ªä¸ªå­¦å“ªä¸ª</p>
                </div>

                <div class="learning-path">
                    <div class="path-section">
                        <h2 class="section-title">
                            <span class="section-number">ç¬¬ä¸€éƒ¨åˆ†</span>
                            ä½ ä¸æ˜¯ä½ çš„æ€ç»´
                        </h2>
                        <p class="section-intro">è¿™æ˜¯å…¨ä¹¦çš„åŸºç¡€ã€‚ç†è§£è¿™ä¸€ç‚¹ï¼Œåé¢çš„ä¸€åˆ‡æ‰èƒ½æ˜ç™½ã€‚</p>
                        
                        <div class="concepts-in-section">
                            <div class="concept-card-new" data-concept="presence">
                                <div class="concept-header">
                                    <h3>1. ä¸´åœ¨ (Presence)</h3>
                                    <span class="status-badge not-started">æœªå¼€å§‹</span>
                                </div>
                                <p class="concept-description">è¶…è¶Šæ€ç»´çš„çº¯ç²¹è§‰çŸ¥</p>
                                <div class="concept-meta">
                                    <span class="reading-time">â±ï¸ 5åˆ†é’Ÿ</span>
                                    <span class="has-exercise">âœ¨ å«ä½“éªŒç»ƒä¹ </span>
                                </div>
                                <button class="start-learning-btn">å¼€å§‹å­¦ä¹ </button>
                            </div>

                            <div class="concept-card-new" data-concept="watching_thinker">
                                <div class="concept-header">
                                    <h3>2. è§‚å¯Ÿæ€ç»´</h3>
                                    <span class="status-badge not-started">æœªå¼€å§‹</span>
                                </div>
                                <p class="concept-description">çœ‹ç€å¿µå¤´æ¥å»ï¼Œä¸è¢«å·å…¥</p>
                                <div class="concept-meta">
                                    <span class="reading-time">â±ï¸ 5åˆ†é’Ÿ</span>
                                    <span class="has-game">ğŸ® å«äº’åŠ¨æ¸¸æˆ</span>
                                </div>
                                <button class="start-learning-btn">å¼€å§‹å­¦ä¹ </button>
                            </div>

                            <div class="concept-card-new" data-concept="ego">
                                <div class="concept-header">
                                    <h3>3. å°æˆ‘çš„çœŸç›¸</h3>
                                    <span class="status-badge not-started">æœªå¼€å§‹</span>
                                </div>
                                <p class="concept-description">è™šå‡çš„è‡ªæˆ‘è®¤åŒ</p>
                                <div class="concept-meta">
                                    <span class="reading-time">â±ï¸ 8åˆ†é’Ÿ</span>
                                    <span class="has-exercise">âœ¨ å«è¯†åˆ«ç»ƒä¹ </span>
                                </div>
                                <button class="start-learning-btn">å¼€å§‹å­¦ä¹ </button>
                            </div>
                        </div>
                    </div>

                    <div class="path-section">
                        <h2 class="section-title">
                            <span class="section-number">ç¬¬äºŒéƒ¨åˆ†</span>
                            æ„è¯†ï¼šé€ƒç¦»ç—›è‹¦çš„å‡ºè·¯
                        </h2>
                        <p class="section-intro">ç†è§£äº†æ€ç»´çš„æœ¬è´¨ï¼Œç°åœ¨å­¦ä¹ å¦‚ä½•è¶…è¶Šå®ƒã€‚</p>
                        
                        <div class="concepts-in-section">
                            <div class="concept-card-new" data-concept="now">
                                <div class="concept-header">
                                    <h3>4. å½“ä¸‹æ—¶åˆ»</h3>
                                    <span class="status-badge not-started">æœªå¼€å§‹</span>
                                </div>
                                <p class="concept-description">å”¯ä¸€çœŸå®çš„æ—¶åˆ»</p>
                                <div class="concept-meta">
                                    <span class="reading-time">â±ï¸ 6åˆ†é’Ÿ</span>
                                    <span class="has-game">ğŸ® å«äº’åŠ¨æ¸¸æˆ</span>
                                </div>
                                <button class="start-learning-btn">å¼€å§‹å­¦ä¹ </button>
                            </div>

                            <div class="concept-card-new" data-concept="awareness">
                                <div class="concept-header">
                                    <h3>5. çº¯ç²¹è§‰çŸ¥</h3>
                                    <span class="status-badge not-started">æœªå¼€å§‹</span>
                                </div>
                                <p class="concept-description">æ„è¯†çš„å®¹å™¨</p>
                                <div class="concept-meta">
                                    <span class="reading-time">â±ï¸ 7åˆ†é’Ÿ</span>
                                    <span class="has-exercise">âœ¨ å«è§‰çŸ¥ç»ƒä¹ </span>
                                </div>
                                <button class="start-learning-btn">å¼€å§‹å­¦ä¹ </button>
                            </div>
                        </div>
                    </div>

                    <div class="quick-practice-section">
                        <h3>ğŸ“Œ éšæ—¶å¯ç”¨çš„å¿«é€Ÿç»ƒä¹ </h3>
                        <p>å½“ä½ æ„Ÿåˆ°ç„¦è™‘ã€æ€ç»´è¿‡è½½æ—¶ï¼š</p>
                        <div class="quick-practices">
                            <button class="quick-practice-btn" data-practice="three_breaths">
                                <span class="practice-icon">ğŸŒ¬ï¸</span>
                                <span class="practice-name">3æ¬¡å‘¼å¸</span>
                                <span class="practice-time">30ç§’</span>
                            </button>
                            <button class="quick-practice-btn" data-practice="body_scan">
                                <span class="practice-icon">ğŸ§˜</span>
                                <span class="practice-name">èº«ä½“æ‰«æ</span>
                                <span class="practice-time">60ç§’</span>
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- å·¥å…·ç®±è§†å›¾ -->
            <div id="toolsView" class="view">
                <div class="tools-container">
                    <h2>è¾…åŠ©å·¥å…·</h2>
                    <p class="tools-intro">æ·±åŒ–ç†è§£å’Œæ—¥å¸¸ç»ƒä¹ çš„å·¥å…·</p>
                    
                    <div class="tools-sections">
                        <div class="tool-section">
                            <h3>ğŸ® äº’åŠ¨æ¸¸æˆ</h3>
                            <p>è®©æŠ½è±¡æ¦‚å¿µå˜å¾—å¯æ„ŸçŸ¥</p>
                            <div class="games-grid" id="gamesList"></div>
                        </div>
                        
                        <div class="tool-section">
                            <h3>ğŸ§˜ æ—¥å¸¸ç»ƒä¹ </h3>
                            <p>ä»ç†è§£åˆ°æ´»å‡ºæ¥</p>
                            <div class="practices-grid" id="practicesList"></div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- æ¨¡æ€æ¡†ï¼ˆä¿ç•™ä¹‹å‰çš„ï¼‰ -->
    <div id="conceptModal" class="modal">
        <div class="modal-content">
            <button class="modal-close">&times;</button>
            <div id="conceptDetails"></div>
        </div>
    </div>

    <div id="gameModal" class="modal">
        <div class="modal-content game-container">
            <button class="modal-close">&times;</button>
            <div id="gameContent"></div>
        </div>
    </div>

    <div id="practiceModal" class="modal">
        <div class="modal-content practice-container">
            <button class="modal-close">&times;</button>
            <div id="practiceContent"></div>
        </div>
    </div>

    <script>
// ä¹¦ç±æ´è§æ•°æ®
const BOOK_INSIGHTS = {
    // ç« èŠ‚æ ¸å¿ƒå‘½é¢˜
    chapters: [
        {
            id: 'ch1',
            number: 'ç¬¬ä¸€ç« ',
            title: 'ä½ ä¸ç­‰äºä½ çš„å¤§è„‘',
            coreProposition: 'äººç±»ç—›è‹¦çš„æ ¹æºåœ¨äºä¸æ€ç»´è®¤åŒï¼Œå°†æ— ä¼‘æ­¢çš„æ€è€ƒè¯¯è®¤ä¸ºæ˜¯"æˆ‘"ã€‚',
            question: 'ä¸ºä»€ä¹ˆæˆ‘ä»¬ä¼šæŒç»­æ„Ÿåˆ°ä¸å®‰å’Œç—›è‹¦ï¼Ÿ',
            subversion: 'ä¼ ç»Ÿè®¤ä¸º"æˆ‘æ€æ•…æˆ‘åœ¨"ï¼Œæœ¬ç« æ­ç¤ºæ€ç»´æ˜¯ç—›è‹¦çš„åˆ¶é€ è€…ï¼Œè€ŒéçœŸå®è‡ªæˆ‘ã€‚',
            value: 'æŒ‡å‡ºå¼€æ‚Ÿçš„æœ€å¤§éšœç¢â€”â€”å¼ºè¿«æ€§æ€ç»´ã€‚',
            relatedConcepts: ['presence', 'ego', 'watching_thinker']
        },
        {
            id: 'ch2',
            number: 'ç¬¬äºŒç« ',
            title: 'æ„è¯†ï¼šæ‘†è„±ç—›è‹¦çš„é€”å¾„',
            coreProposition: 'å¤§éƒ¨åˆ†äººç±»ç—›è‹¦æ˜¯ä¸å¿…è¦çš„ï¼Œæºäºå¯¹å½“ä¸‹çš„æŠ—æ‹’å’Œå¯¹æ€ç»´çš„æ— æ„è¯†è®¤åŒã€‚',
            question: 'å¦‚ä½•ç»ˆæ­¢ç—›è‹¦çš„å¾ªç¯ï¼Ÿ',
            subversion: 'ç—›è‹¦ä¸æ˜¯å¿…ç„¶çš„ï¼Œè€Œæ˜¯æ€ç»´æ¨¡å¼çš„äº§ç‰©ã€‚',
            value: 'æå‡º"ç—›è‹¦ä¹‹èº«"æ¦‚å¿µï¼Œè§£é‡Šé›†ä½“å’Œä¸ªäººçš„æƒ…ç»ªåŒ…è¢±ã€‚',
            relatedConcepts: ['presence', 'now']
        },
        {
            id: 'ch3',
            number: 'ç¬¬ä¸‰ç« ',
            title: 'æ·±æ·±åœ°è¿›å…¥å½“ä¸‹',
            coreProposition: 'æ—¶é—´æ˜¯æ€ç»´çš„äº§ç‰©ï¼ŒçœŸå®çš„ç”Ÿå‘½åªå­˜åœ¨äºå½“ä¸‹è¿™ä¸€åˆ»ã€‚',
            question: 'å¦‚ä½•ä»æ—¶é—´çš„å›šç¦ä¸­è§£è„±ï¼Ÿ',
            subversion: 'è¿‡å»å’Œæœªæ¥éƒ½æ˜¯å¹»è±¡ï¼Œå”¯æœ‰å½“ä¸‹çœŸå®å­˜åœ¨ã€‚',
            value: 'ç»ˆç»“"æ—¶é—´ç­‰äºç”Ÿå‘½"çš„é”™è§‰ã€‚',
            relatedConcepts: ['now', 'awareness']
        },
        {
            id: 'ch4',
            number: 'ç¬¬å››ç« ',
            title: 'æ€ç»´é€ƒé¿å½“ä¸‹çš„ç­–ç•¥',
            coreProposition: 'å°æˆ‘é€šè¿‡åˆ¶é€ é—®é¢˜ã€æˆå‰§åŒ–ã€å¯»æ±‚å®Œæ»¡æ¥é€ƒé¿å½“ä¸‹ã€‚',
            question: 'ä¸ºä»€ä¹ˆæˆ‘ä»¬æ€»æ˜¯æ— æ³•å®‰ä½å½“ä¸‹ï¼Ÿ',
            subversion: 'é—®é¢˜æ„è¯†æœ¬èº«å°±æ˜¯éšœç¢ï¼Œç”Ÿå‘½æƒ…å¢ƒä¸ç­‰äºé—®é¢˜ã€‚',
            value: 'æ­ç¤ºå°æˆ‘ç»´æŒè‡ªèº«çš„å„ç§ç­–ç•¥ã€‚',
            relatedConcepts: ['ego', 'now']
        },
        {
            id: 'ch5',
            number: 'ç¬¬äº”ç« ',
            title: 'ä¸´åœ¨çŠ¶æ€',
            coreProposition: 'ä¸´åœ¨æ˜¯è¶…è¶Šæ€ç»´çš„çº¯ç²¹è§‰çŸ¥ï¼Œæ˜¯å¼€æ‚Ÿçš„æœ¬è´¨çŠ¶æ€ã€‚',
            question: 'ä»€ä¹ˆæ˜¯çœŸæ­£çš„å¼€æ‚ŸçŠ¶æ€ï¼Ÿ',
            subversion: 'å¼€æ‚Ÿä¸æ˜¯è¶…äººç±»æˆå°±ï¼Œè€Œæ˜¯è‡ªç„¶çš„æœ¬ä½“åˆä¸€çŠ¶æ€ã€‚',
            value: 'å°†ç¥ç§˜çš„"å¼€æ‚Ÿ"è¿˜åŸä¸ºå¯ä½“éªŒçš„ä¸´åœ¨ã€‚',
            relatedConcepts: ['presence', 'awareness']
        },
        {
            id: 'ch6',
            number: 'ç¬¬å…­ç« ',
            title: 'å†…åœ¨èº«ä½“',
            coreProposition: 'é€šè¿‡æ„ŸçŸ¥å†…åœ¨èº«ä½“çš„èƒ½é‡åœºï¼Œå¯ä»¥é”šå®šåœ¨å½“ä¸‹ï¼Œè¿™æ˜¯è¿æ¥æœ¬ä½“çš„æœ€æœ‰æ•ˆæ–¹æ³•ä¹‹ä¸€ã€‚',
            question: 'å¦‚ä½•åœ¨æ—¥å¸¸ç”Ÿæ´»ä¸­ä¿æŒä¸´åœ¨ï¼Ÿ',
            subversion: 'èº«ä½“ä¸ä»…æ˜¯ç‰©è´¨å½¢å¼ï¼Œæ›´æ˜¯é€šå¾€æœ¬ä½“çš„é—¨æˆ·ã€‚',
            value: 'æä¾›å…·ä½“å¯æ“ä½œçš„ä¸´åœ¨ç»ƒä¹ æ–¹æ³•ã€‚',
            relatedConcepts: ['presence', 'awareness', 'being']
        },
        {
            id: 'ch7',
            number: 'ç¬¬ä¸ƒç« ',
            title: 'é€šå¾€å½“ä¸‹çš„å…¥å£',
            coreProposition: 'æ—¥å¸¸ç”Ÿæ´»ä¸­çš„æ¯ä¸ªæ—¶åˆ»å’Œæƒ…å¢ƒéƒ½å¯ä»¥æˆä¸ºè¿›å…¥å½“ä¸‹çš„é—¨æˆ·ã€‚',
            question: 'åœ¨å¿™ç¢Œçš„ç”Ÿæ´»ä¸­å¦‚ä½•å®è·µä¸´åœ¨ï¼Ÿ',
            subversion: 'å¹³å‡¡æ—¶åˆ»æ¯”ç‰¹æ®Šä½“éªŒæ›´èƒ½æ­ç¤ºçœŸç†ã€‚',
            value: 'å°†æŠ½è±¡çš„çµæ€§æ•™å¯¼è½¬åŒ–ä¸ºç”Ÿæ´»å®è·µã€‚',
            relatedConcepts: ['now', 'presence', 'awareness']
        },
        {
            id: 'ch8',
            number: 'ç¬¬å…«ç« ',
            title: 'å¼€æ‚Ÿçš„å…³ç³»',
            coreProposition: 'çœŸæ­£çš„å…³ç³»å§‹äºå¯¹è‡ªå·±å’Œä»–äººçš„ä¸´åœ¨ï¼Œè€Œéå°æˆ‘é—´çš„äº’åŠ¨ã€‚',
            question: 'å¦‚ä½•åœ¨å…³ç³»ä¸­ä¿æŒè§‰çŸ¥å’Œä¸´åœ¨ï¼Ÿ',
            subversion: 'å…³ç³»ä¸æ˜¯ç”¨æ¥æ»¡è¶³å°æˆ‘éœ€æ±‚çš„ï¼Œè€Œæ˜¯è§‰é†’çš„æœºä¼šã€‚',
            value: 'æ­ç¤ºå…³ç³»ä¸­çš„å°æˆ‘æ¨¡å¼å’Œè¶…è¶Šä¹‹é“ã€‚',
            relatedConcepts: ['ego', 'presence', 'being']
        },
        {
            id: 'ch9',
            number: 'ç¬¬ä¹ç« ',
            title: 'è¶…è¶Šå¿«ä¹ä¸ä¸å¿«ä¹çš„å¹³å®‰',
            coreProposition: 'çœŸæ­£çš„å¹³å®‰å’Œå–œæ‚¦ä¸ä¾èµ–å¤–åœ¨æ¡ä»¶ï¼Œæºè‡ªä¸æœ¬ä½“çš„è¿æ¥ã€‚',
            question: 'å¦‚ä½•è·å¾—ä¸è¢«å¤–ç•Œå½±å“çš„å†…åœ¨å¹³å®‰ï¼Ÿ',
            subversion: 'è¿½æ±‚å¿«ä¹æœ¬èº«å°±æ˜¯ç—›è‹¦çš„å»¶ç»­ï¼Œå¹³å®‰è¶…è¶ŠäºŒå…ƒå¯¹ç«‹ã€‚',
            value: 'æŒ‡å‘è¶…è¶Šæ‰€æœ‰å¿ƒç†çŠ¶æ€çš„æ ¹æœ¬å¹¸ç¦ã€‚',
            relatedConcepts: ['being', 'presence', 'now']
        },
        {
            id: 'ch10',
            number: 'ç¬¬åç« ',
            title: 'è‡£æœçš„æ„ä¹‰',
            coreProposition: 'è‡£æœä¸æ˜¯æ”¾å¼ƒï¼Œè€Œæ˜¯åœæ­¢å¯¹å½“ä¸‹çš„å†…åœ¨æŠ—æ‹’ï¼Œè¿™æ˜¯æœ€æ·±åˆ»çš„åŠ›é‡ã€‚',
            question: 'å¦‚ä½•é¢å¯¹æ— æ³•æ”¹å˜çš„ç”Ÿæ´»æƒ…å¢ƒï¼Ÿ',
            subversion: 'çœŸæ­£çš„åŠ›é‡æ¥è‡ªæ¥çº³ï¼Œè€Œéå¯¹æŠ—ã€‚',
            value: 'è§£å†³"æ¥çº³ç°çŠ¶"ä¸"ç§¯ææ”¹å˜"çš„è¡¨é¢çŸ›ç›¾ã€‚',
            relatedConcepts: ['now', 'presence', 'being']
        }
    ],
    
    // ç»ˆææ ¸å¿ƒå‘½é¢˜
    ultimateProposition: {
        statement: 'å½“ä¸‹æ—¶åˆ»æ˜¯é€šå¾€æœ¬ä½“çš„å”¯ä¸€å…¥å£ï¼Œä»æ—¶é—´å¹»è±¡ä¸­è§‰é†’å³æ˜¯å¼€æ‚Ÿã€‚',
        expansion: [
            'æ—¶é—´æ˜¯å¹»è±¡ â†’ è¿‡å»å’Œæœªæ¥ä¸çœŸå®å­˜åœ¨',
            'æ€ç»´åˆ›é€ æ—¶é—´ â†’ ä¸æ€ç»´è®¤åŒå°±é™·å…¥æ—¶é—´',
            'å½“ä¸‹æ˜¯å”¯ä¸€å®åœ¨ â†’ ç”Ÿå‘½åªåœ¨æ­¤åˆ»å±•å¼€',
            'æœ¬ä½“è¶…è¶Šå½¢å¼ â†’ çœŸå®è‡ªæˆ‘ä¸å—æ—¶é—´é™åˆ¶',
            'ä¸´åœ¨å³å¼€æ‚Ÿ â†’ å®‰ä½å½“ä¸‹å°±æ˜¯è§‰é†’'
        ]
    },
    
    // è®ºè¯åœ°å›¾
    argumentMap: {
        startPoint: 'äººç±»çš„ç—›è‹¦æºäºä¸æ€ç»´çš„è®¤åŒå’Œå¯¹å½“ä¸‹çš„æŠ—æ‹’ã€‚é€šè¿‡è§‰å¯Ÿæ€ç»´ã€å®‰ä½å½“ä¸‹ï¼Œå¯ä»¥æ¥è§¦åˆ°è¶…è¶Šå½¢å¼çš„æœ¬ä½“ï¼Œè¿™å°±æ˜¯å¼€æ‚Ÿâ€”â€”å—è‹¦çš„ç»ˆç»“ã€‚',
        landmarks: [
            {
                id: 'landmark1',
                title: 'è¯†åˆ«è™šå‡è‡ªæˆ‘ï¼ˆå°æˆ‘ï¼‰',
                argument: 'ä½ æ‰€è®¤ä¸ºçš„"æˆ‘"å…¶å®æ˜¯æ€ç»´åˆ¶é€ çš„å¹»è±¡ã€‚çœŸå®çš„ä½ æ˜¯é‚£ä¸ªèƒ½å¤Ÿè§‰å¯Ÿæ€ç»´çš„å­˜åœ¨ã€‚',
                keyPoints: [
                    'å¦‚æœä½ èƒ½è§‚å¯Ÿä½ çš„æ€ç»´ï¼Œé‚£ä¹ˆè§‚å¯Ÿè€…ä¸å¯èƒ½ç­‰äºè¢«è§‚å¯Ÿç‰©',
                    'æ€ç»´æ˜¯å·¥å…·ï¼Œä¸æ˜¯ä½¿ç”¨è€…',
                    'å°æˆ‘é€šè¿‡æ€ç»´è®¤åŒç»´æŒè‡ªèº«ï¼Œåˆ¶é€ "æˆ‘"å’Œ"æˆ‘çš„æ•…äº‹"'
                ],
                experiment: 'è°åœ¨å¬æˆ‘è„‘æµ·ä¸­çš„å£°éŸ³ï¼Ÿå½“ä½ é—®å‡ºè¿™ä¸ªé—®é¢˜ï¼Œä½ å·²ç»ä¸æ˜¯é‚£ä¸ªå£°éŸ³äº†ã€‚',
                nextStep: 'è¯†åˆ«äº†è™šå‡è‡ªæˆ‘åï¼Œè‡ªç„¶è¦é—®ï¼šçœŸå®çš„æˆ‘æ˜¯è°ï¼Ÿ'
            },
            {
                id: 'landmark2',
                title: 'æ­ç¤ºæ—¶é—´å¹»è±¡',
                argument: 'è¿‡å»åªæ˜¯è®°å¿†ç—•è¿¹ï¼Œæœªæ¥åªæ˜¯æ€ç»´æŠ•å°„ï¼Œå”¯æœ‰å½“ä¸‹çœŸå®å­˜åœ¨ã€‚',
                keyPoints: [
                    'ä»»ä½•äº‹ç‰©éƒ½ä¸å¯èƒ½å­˜åœ¨äºå½“ä¸‹ä¹‹å¤–',
                    'ä½ çš„ç”Ÿå‘½ä»æ¥æ²¡æœ‰ä¸åœ¨å½“ä¸‹è¿™ä¸€åˆ»å‘ç”Ÿ',
                    '"æ˜å¤©"æ°¸è¿œä¸ä¼šåˆ°æ¥ï¼Œåˆ°æ¥çš„æ°¸è¿œæ˜¯"å½“ä¸‹"'
                ],
                insight: 'æ—¶é—´ä¸çè´µï¼Œå› ä¸ºå®ƒæ˜¯å¹»è±¡ã€‚çè´µçš„æ˜¯ä¸åœ¨æ—¶é—´å†…çš„é‚£ä¸€ç‚¹â€”â€”å½“ä¸‹ã€‚',
                nextStep: 'æ—¢ç„¶åªæœ‰å½“ä¸‹çœŸå®ï¼Œä¸ºä»€ä¹ˆæˆ‘ä»¬æ€»æ˜¯é€ƒç¦»å½“ä¸‹ï¼Ÿ'
            },
            {
                id: 'landmark3',
                title: 'ç†è§£ç—›è‹¦æœºåˆ¶',
                argument: 'ç—›è‹¦ = å¯¹å½“ä¸‹çš„æŠ—æ‹’ Ã— æ€ç»´è®¤åŒç¨‹åº¦',
                keyPoints: [
                    'æ€ç»´é€šè¿‡å¦è®¤å½“ä¸‹æ¥ç»´æŒæ§åˆ¶',
                    'æŠ—æ‹’å½“ä¸‹å°±æ˜¯æŠ—æ‹’ç”Ÿå‘½æœ¬èº«',
                    'æœªè¢«è§‰å¯Ÿçš„æ€ç»´è‡ªåŠ¨äº§ç”Ÿç—›è‹¦'
                ],
                examples: [
                    'å µè½¦æ—¶çš„çƒ¦èºï¼šä¸æ˜¯å µè½¦æœ¬èº«ï¼Œè€Œæ˜¯å¯¹"åº”è¯¥æ›´å¿«"çš„æŠ—æ‹’',
                    'å¤±æ‹çš„ç—›è‹¦ï¼šä¸åªæ˜¯å¤±å»ï¼Œæ›´æ˜¯æ€ç»´è®²è¿°çš„"æˆ‘çš„æ•…äº‹"'
                ],
                nextStep: 'å¦‚ä½•ç»ˆæ­¢è¿™ç§ç—›è‹¦æ¨¡å¼ï¼Ÿ'
            },
            {
                id: 'landmark4',
                title: 'è¿›å…¥å½“ä¸‹çš„å®è·µ',
                argument: 'é€šè¿‡å†…åœ¨èº«ä½“è§‰çŸ¥å’Œæ„Ÿå®˜ä¸´åœ¨ï¼Œå¯ä»¥é”šå®šåœ¨å½“ä¸‹å¹¶è¶…è¶Šæ€ç»´ã€‚',
                practices: [
                    'è§‰å¯Ÿæ€ç»´ï¼šæˆä¸ºæ€ç»´çš„è§‚å¯Ÿè€…ï¼Œè€Œéè®¤åŒè€…',
                    'æ„Ÿå—å†…åœ¨èº«ä½“ï¼šæ³¨æ„åŠ›å‘å†…ï¼Œæ„Ÿå—èƒ½é‡åœº',
                    'å…¨ç„¶æ¥çº³ï¼šå¯¹å½“ä¸‹è¯´"æ˜¯"',
                    'æ„Ÿå®˜ä¸´åœ¨ï¼šå®Œå…¨èå…¥æ­¤åˆ»çš„è§†å¬è§¦'
                ],
                turning: 'æ¥çº³ä¸æ˜¯è¢«åŠ¨æ”¾å¼ƒï¼Œè€Œæ˜¯æ¸…é†’è®¤çŸ¥åçš„æ˜æ™ºè¡ŒåŠ¨ã€‚',
                nextStep: 'å½“ä¸‹ä½“éªŒä¹‹åæ˜¯ä»€ä¹ˆï¼Ÿ'
            },
            {
                id: 'landmark5',
                title: 'æ¥è§¦æœ¬ä½“',
                argument: 'åœ¨æ€ç»´é™æ­¢ã€æ·±æ·±ä¸´åœ¨æ—¶ï¼Œä½ ä¼šè§¦åŠè¶…è¶Šå½¢å¼çš„æ°¸æ’ç»´åº¦â€”â€”æœ¬ä½“ã€‚',
                description: [
                    'æœ¬ä½“æ˜¯"è‡³ä¸€ç”Ÿå‘½"ï¼Œè¶…è¶Šæ‰€æœ‰å½¢å¼',
                    'å®ƒä¸å¯è¢«æ€ç»´ç†è§£ï¼Œåªèƒ½è¢«æ„Ÿå—',
                    'ä¸´åœ¨å°±æ˜¯æœ¬ä½“çš„æ˜¾ç°'
                ],
                deepInsight: '"æˆ‘æ˜¯"çš„æ„Ÿè§‰ä¸éœ€è¦æ€ç»´æ”¯æ’‘ï¼Œè¿™å°±æ˜¯æœ¬ä½“ã€‚',
                nextStep: 'è¿™ç§ä½“éªŒå¦‚ä½•æ”¹å˜æ—¥å¸¸ç”Ÿæ´»ï¼Ÿ'
            },
            {
                id: 'landmark6',
                title: 'æ´»åœ¨è§‰é†’ä¸­',
                argument: 'å¼€æ‚Ÿä¸æ˜¯é¥ä¸å¯åŠçš„çŠ¶æ€ï¼Œè€Œæ˜¯å½“ä¸‹ä¸´åœ¨çš„æŒç»­æ·±åŒ–ã€‚',
                integration: [
                    'åœ¨å…³ç³»ä¸­ä¿æŒä¸´åœ¨',
                    'åœ¨æŒ‘æˆ˜ä¸­é€‰æ‹©æ¥çº³',
                    'åœ¨æ—¥å¸¸ä¸­æ´»å‡ºè§‰çŸ¥'
                ],
                wisdom: 'ä¸æ˜¯"è·å¾—"å¼€æ‚Ÿï¼Œè€Œæ˜¯"ç§»é™¤"é®è”½æœ¬ä½“çš„æ— æ„è¯†æ¨¡å¼ã€‚'
            }
        ]
    },
    
    // Key20 æ´è§
    key20: [
        {
            id: 'insight1',
            title: 'æ€ç»´æ˜¯å·¥å…·ï¼Œä¸æ˜¯ä¸»äºº',
            en: 'You are not your mind.',
            zh: 'ä½ ä¸æ˜¯ä½ çš„æ€ç»´ã€‚',
            analysis: 'ä¼ ç»Ÿå“²å­¦"æˆ‘æ€æ•…æˆ‘åœ¨"å°†æ€ç»´ç­‰åŒäºå­˜åœ¨æœ¬èº«ã€‚æ‰˜åˆ©é¢ è¦†è¿™ä¸€ç‚¹ï¼šæ€ç»´åªæ˜¯å·¥å…·ï¼ŒçœŸå®çš„ä½ æ˜¯èƒ½å¤Ÿè§‰å¯Ÿæ€ç»´çš„é‚£ä¸ªå­˜åœ¨ã€‚å°±åƒä½ ä¸ç­‰äºä½ çš„æ‰‹æœºï¼Œå°½ç®¡ä½ ä½¿ç”¨å®ƒã€‚è¿™ä¸ªæ´è§æ˜¯æ•´æœ¬ä¹¦çš„åŸºçŸ³ã€‚',
            category: 'foundation'
        },
        {
            id: 'insight2',
            title: 'æ—¶é—´çš„è™šå¹»æœ¬è´¨',
            en: 'Time isn\'t precious at all, because it is an illusion.',
            zh: 'æ—¶é—´ä¸€ç‚¹å„¿ä¹Ÿä¸çè´µï¼Œå› ä¸ºå®ƒä»…ä»…æ˜¯ä¸€ç§å¹»è±¡ã€‚',
            analysis: 'ç°ä»£ç¤¾ä¼šå°†"æ—¶é—´ç®¡ç†"å¥‰ä¸ºåœ­è‡¬ï¼Œè®¤ä¸ºæ—¶é—´æœ€çè´µã€‚æ‰˜åˆ©æ­ç¤ºï¼šçœŸæ­£çè´µçš„æ˜¯ä¸åœ¨æ—¶é—´å†…çš„"å½“ä¸‹"ã€‚è¿‡å»åªæ˜¯è®°å¿†,æœªæ¥åªæ˜¯æƒ³è±¡ï¼ŒçœŸå®å­˜åœ¨åªæœ‰æ­¤åˆ»ã€‚è¿™é¢ è¦†äº†æ•´ä¸ªæ•ˆç‡æ–‡åŒ–çš„åŸºç¡€ã€‚',
            category: 'foundation'
        },
        {
            id: 'insight3',
            title: 'ç—›è‹¦çš„è‡ªæ„¿æ€§',
            en: 'The greater part of human pain is unnecessary.',
            zh: 'äººç±»çš„å¾ˆå¤§ä¸€éƒ¨åˆ†ç—›è‹¦æ˜¯æ²¡æœ‰å¿…è¦çš„ã€‚',
            analysis: 'æˆ‘ä»¬ä¹ æƒ¯è®¤ä¸ºç—›è‹¦æ˜¯ç”Ÿæ´»çš„å¿…ç„¶ã€‚æ‰˜åˆ©æŒ‡å‡ºï¼šèº«ä½“çš„ç–¼ç—›æ— æ³•é¿å…ï¼Œä½†å¿ƒç†ç—›è‹¦æ˜¯æ€ç»´å¯¹å½“ä¸‹æŠ—æ‹’çš„äº§ç‰©ã€‚ç—›è‹¦ç¨‹åº¦=æŠ—æ‹’ç¨‹åº¦Ã—æ€ç»´è®¤åŒã€‚è¿™æ„å‘³ç€æˆ‘ä»¬å¯¹ç—›è‹¦æœ‰é€‰æ‹©æƒã€‚',
            category: 'foundation'
        },
        {
            id: 'insight4',
            title: 'å½“ä¸‹æ˜¯å”¯ä¸€çš„å®åœ¨',
            en: 'Nothing ever happened in the past; it happened in the Now.',
            zh: 'ä»»ä½•äº‹éƒ½ä¸æ›¾å‘ç”Ÿåœ¨è¿‡å»ï¼Œéƒ½å‘ç”Ÿåœ¨å½“ä¸‹ã€‚',
            analysis: 'å³ä½¿å›å¿†è¿‡å»ï¼Œå›å¿†çš„è¡Œä¸ºä¹Ÿå‘ç”Ÿåœ¨å½“ä¸‹ã€‚é¢„æœŸæœªæ¥ï¼Œé¢„æœŸæœ¬èº«ä¹Ÿåœ¨å½“ä¸‹ã€‚ä½ çš„æ•´ä¸ªç”Ÿå‘½ï¼Œä»æœªç¦»å¼€è¿‡"æ­¤åˆ»"è¿™ä¸ªç©ºé—´ã€‚è¿™ä¸ªæ´è§å½»åº•æ¶ˆè§£äº†æ—¶é—´çš„å®åœ¨æ€§ã€‚',
            category: 'foundation'
        },
        {
            id: 'insight5',
            title: 'å°æˆ‘ä»¥é—®é¢˜ä¸ºç”Ÿ',
            en: 'The ego needs problems, conflict, and "enemies" to strengthen itself.',
            zh: 'å°æˆ‘éœ€è¦é—®é¢˜ã€å†²çªå’Œ"æ•Œäºº"æ¥å¼ºåŒ–è‡ªå·±ã€‚',
            analysis: 'ä¸ºä»€ä¹ˆç”Ÿæ´»æ€»æœ‰è§£å†³ä¸å®Œçš„é—®é¢˜ï¼Ÿå› ä¸ºå°æˆ‘é€šè¿‡é—®é¢˜æ„è¯†ç»´æŒè‡ªèº«ã€‚æ²¡æœ‰é—®é¢˜ï¼Œè™šå‡è‡ªæˆ‘å°±å¤±å»å­˜åœ¨æ„Ÿã€‚æ‰€ä»¥å°æˆ‘æ½œæ„è¯†åœ°åˆ›é€ æˆ–ç»´æŒé—®é¢˜ã€‚è®¤è¯†åˆ°è¿™ä¸€ç‚¹ï¼Œä½ å°±ç†è§£äº†ä¸ºä»€ä¹ˆ"è§£å†³é—®é¢˜"å¸¸å¸¸å¯¼è‡´æ–°é—®é¢˜ã€‚',
            category: 'practice'
        },
        {
            id: 'insight6',
            title: 'æ¥çº³çš„åŠ›é‡',
            en: 'Surrender is the simple but profound wisdom of yielding to rather than opposing the flow of life.',
            zh: 'è‡£æœæ˜¯é¡ºä»è€Œä¸æ˜¯å¯¹æŠ—ç”Ÿå‘½ä¹‹æµçš„ç®€å•è€Œæ·±åˆ»çš„æ™ºæ…§ã€‚',
            analysis: '"è‡£æœ"è¢«è¯¯è§£ä¸ºæ¶ˆææ”¾å¼ƒã€‚å®é™…ä¸Šï¼Œè‡£æœæ˜¯æ¥çº³å½“ä¸‹åçš„æ˜æ™ºè¡ŒåŠ¨ã€‚æŠ—æ‹’æ¶ˆè€—èƒ½é‡ä¸”æ— æ•ˆï¼Œæ¥çº³é‡Šæ”¾èƒ½é‡å¹¶å¸¦æ¥æ¸…æ™°ã€‚è¿™ä¸æ˜¯å®¿å‘½è®ºï¼Œè€Œæ˜¯è¡ŒåŠ¨çš„æ›´é«˜æ™ºæ…§ã€‚',
            category: 'practice'
        },
        {
            id: 'insight7',
            title: 'å¼€æ‚Ÿçš„å»ç¥ç§˜åŒ–',
            en: 'Enlightenment is simply your natural state of felt oneness with Being.',
            zh: 'å¼€æ‚Ÿå°±æ˜¯ä¸€ç§ç®€å•çš„ä¸æœ¬ä½“åˆä¸€çš„è‡ªç„¶çŠ¶æ€ã€‚',
            analysis: 'ä¼ ç»Ÿå°†å¼€æ‚Ÿæè¿°ä¸ºè¶…äººç±»æˆå°±ï¼Œé¥ä¸å¯åŠã€‚æ‰˜åˆ©å°†å…¶è¿˜åŸä¸º"æœ¬ä½“åˆä¸€çš„è‡ªç„¶çŠ¶æ€"ã€‚å°±åƒé±¼å‘ç°æ°´ï¼Œå¼€æ‚Ÿæ˜¯è®¤å‡ºä¸€ç›´å­˜åœ¨çš„çœŸå®ã€‚è¿™ä¸ªå»ç¥ç§˜åŒ–ä½¿å¼€æ‚Ÿå˜å¾—å¯åŠã€‚',
            category: 'understanding'
        },
        {
            id: 'insight8',
            title: 'ç—›è‹¦ä¹‹èº«çš„é›†ä½“æ€§',
            en: 'The pain-body is the accumulated emotional pain from your past and from humanity\'s collective past.',
            zh: 'ç—›è‹¦ä¹‹èº«æ˜¯ä½ è¿‡å»ä»¥åŠäººç±»é›†ä½“è¿‡å»ç§¯ç´¯çš„æƒ…ç»ªç—›è‹¦ã€‚',
            analysis: 'ä¸ºä»€ä¹ˆæœ‰æ—¶æƒ…ç»ªååº”è¿œè¶…äº‹ä»¶æœ¬èº«ï¼Ÿå› ä¸ºè§¦å‘äº†"ç—›è‹¦ä¹‹èº«"â€”â€”ä¸ªäººå’Œé›†ä½“çš„æƒ…ç»ªç´¯ç§¯ã€‚å®ƒåƒå®ä½“èˆ¬å­˜æ´»,éœ€è¦è´Ÿé¢æƒ…ç»ªå–‚å…»ã€‚è¿™è§£é‡Šäº†æƒ…ç»ªçš„éç†æ€§å¼ºåº¦ã€‚',
            category: 'understanding'
        },
        {
            id: 'insight9',
            title: 'è§‚å¯Ÿè€…çš„è§£æ”¾',
            en: 'The moment you start watching the thinker, a higher level of consciousness becomes activated.',
            zh: 'å½“ä½ å¼€å§‹è§‚å¯Ÿæ€ç»´è€…,ä¸€ä¸ªæ›´é«˜å±‚æ¬¡çš„æ„è¯†å°±è¢«æ¿€æ´»äº†ã€‚',
            analysis: 'ä½ æ— æ³•åœæ­¢æ€ç»´,ä½†å¯ä»¥æˆä¸ºæ€ç»´çš„è§‚å¯Ÿè€…ã€‚è§‚å¯Ÿæœ¬èº«å°±åˆ›é€ äº†è·ç¦»,ä½ ä¸å†å®Œå…¨è®¤åŒæ€ç»´ã€‚è¿™ä¸ªç®€å•çš„è½¬æ¢(ä»è®¤åŒåˆ°è§‚å¯Ÿ)å°±æ˜¯æ„è¯†çš„é©å‘½æ€§è·ƒè¿ã€‚',
            category: 'practice'
        },
        {
            id: 'insight10',
            title: 'å…³ç³»çš„çœŸæ­£ç›®çš„',
            en: 'Love is not a relationship. Love is a state of Being.',
            zh: 'çˆ±ä¸æ˜¯ä¸€ç§å…³ç³»ã€‚çˆ±æ˜¯ä¸€ç§å­˜åœ¨çŠ¶æ€ã€‚',
            analysis: 'æˆ‘ä»¬åœ¨å…³ç³»ä¸­å¯»æ‰¾å®Œæ•´æ„Ÿ,ä½†è¿™å¯¼è‡´ä¾èµ–å’Œç—›è‹¦ã€‚çœŸæ­£çš„çˆ±ä¸æ˜¯å°æˆ‘çš„éœ€æ±‚æ»¡è¶³,è€Œæ˜¯ä¸´åœ¨çŠ¶æ€çš„è‡ªç„¶æµéœ²ã€‚å…³ç³»çš„ç›®çš„ä¸æ˜¯å¹¸ç¦,è€Œæ˜¯å¸¦ä½ æ›´æ·±å…¥å½“ä¸‹ã€æ›´æ·±å…¥æ„è¯†ã€‚',
            category: 'integration'
        },
        {
            id: 'insight11',
            title: 'å†…åœ¨èº«ä½“çš„é—¨æˆ·',
            en: 'The body that you can see and touch is only a thin outer shell.',
            zh: 'ä½ èƒ½çœ‹è§å’Œè§¦æ‘¸çš„èº«ä½“åªæ˜¯ä¸€ä¸ªè–„è–„çš„å¤–å£³ã€‚',
            analysis: 'æˆ‘ä»¬æŠŠèº«ä½“è§†ä¸ºçº¯ç‰©è´¨å¯¹è±¡ã€‚æ‰˜åˆ©æŒ‡å‡ºï¼šæ„ŸçŸ¥å†…åœ¨èº«ä½“çš„èƒ½é‡åœºæ˜¯æœ€ç®€å•çš„ä¸´åœ¨æ–¹æ³•ã€‚å°†æ³¨æ„åŠ›å¸¦å…¥æ‰‹ã€è„šã€è…¹éƒ¨ï¼Œæ„Ÿå—å†…åœ¨çš„ç”Ÿå‘½åŠ›ï¼Œä½ å°±é”šå®šåœ¨å½“ä¸‹äº†ã€‚',
            category: 'practice'
        },
        {
            id: 'insight12',
            title: 'ç­‰å¾…çš„è‰ºæœ¯',
            en: 'Waiting is a state of mind where you need the future.',
            zh: 'ç­‰å¾…æ˜¯ä¸€ç§å¿ƒæ™ºçŠ¶æ€ï¼Œä½ éœ€è¦æœªæ¥æ‰èƒ½æ»¡è¶³ã€‚',
            analysis: 'æ—¥å¸¸ç”Ÿæ´»ä¸­æˆ‘ä»¬å¸¸è§‰å¾—"åœ¨ç­‰å¾…ä¸­æµªè´¹æ—¶é—´"ã€‚æ‰˜åˆ©é¢ è¦†è¿™ç‚¹ï¼šå°†ç­‰å¾…è½¬åŒ–ä¸ºè­¦è§‰çš„ä¸´åœ¨ã€‚åœ¨ç­‰è½¦ã€æ’é˜Ÿæ—¶ï¼Œä¸æ˜¯"ç­‰"æŸäº‹å‘ç”Ÿï¼Œè€Œæ˜¯å…¨ç„¶ä¸´åœ¨æ­¤åˆ»ã€‚è¿™æ ·æ²¡æœ‰ä¸€åˆ»æ˜¯è¢«æµªè´¹çš„ã€‚',
            category: 'practice'
        },
        {
            id: 'insight13',
            title: 'ç–¾ç—…çš„å†…åœ¨å±‚é¢',
            en: 'Every illness has both a physical and an inner psychological component.',
            zh: 'æ¯ç§ç–¾ç—…éƒ½æœ‰ç‰©è´¨å’Œå†…åœ¨å¿ƒç†ä¸¤ä¸ªå±‚é¢ã€‚',
            analysis: 'åŒ»å­¦èšç„¦ç‰©è´¨èº«ä½“ã€‚æ‰˜åˆ©æŒ‡å‡ºï¼šå¾ˆå¤šç–¾ç—…æºäºé•¿æœŸçš„å†…åœ¨æŠ—æ‹’å’Œ"ç—›è‹¦ä¹‹èº«"ã€‚é€šè¿‡åœæ­¢æŠ—æ‹’ã€æ·±å…¥ä¸´åœ¨ï¼Œå¯ä»¥ä»å†…åœ¨å±‚é¢å½±å“å¥åº·ã€‚è¿™ä¸å¦å®šåŒ»å­¦ï¼Œè€Œæ˜¯è¡¥å……æ›´æ·±ç»´åº¦ã€‚',
            category: 'understanding'
        },
        {
            id: 'insight14',
            title: 'è‡£æœä¸æ˜¯å¤±è´¥',
            en: 'Surrender is the simple but profound wisdom of yielding to rather than opposing the flow of life.',
            zh: 'è‡£æœæ˜¯é¡ºåº”è€Œéå¯¹æŠ—ç”Ÿå‘½ä¹‹æµçš„ç®€å•è€Œæ·±åˆ»çš„æ™ºæ…§ã€‚',
            analysis: 'æ–‡åŒ–æ•™å¯¼æˆ‘ä»¬"æ°¸ä¸æ”¾å¼ƒ""åšæŒåˆ°åº•"ã€‚æ‰˜åˆ©åŒºåˆ†ï¼šå¯¹ä¸å¯æ”¹å˜çš„å¤–åœ¨æƒ…å¢ƒè‡£æœï¼Œå¯¹å¯æ”¹å˜çš„æƒ…å¢ƒè¡ŒåŠ¨ã€‚è‡£æœä¸æ˜¯è½¯å¼±ï¼Œè€Œæ˜¯æ™ºæ…§åœ°é€‰æ‹©æˆ˜åœºã€‚æŠ—æ‹’ä¸å¯æ”¹å˜çš„äº‹åªä¼šåˆ¶é€ ç—›è‹¦ã€‚',
            category: 'practice'
        },
        {
            id: 'insight15',
            title: 'å½“ä¸‹çš„åˆ›é€ åŠ›',
            en: 'True intelligence operates silently. Stillness is where creativity and solutions are found.',
            zh: 'çœŸæ­£çš„æ™ºæ…§é™é™è¿ä½œã€‚å¯‚é™æ˜¯åˆ›é€ åŠ›å’Œè§£å†³æ–¹æ¡ˆçš„æºæ³‰ã€‚',
            analysis: 'æˆ‘ä»¬è®¤ä¸ºæ›´å¤šæ€è€ƒ=æ›´å¥½å†³ç­–ã€‚æ‰˜åˆ©æ­ç¤ºï¼šå¼ºè¿«æ€§æ€ç»´é˜»ç¢æ™ºæ…§ã€‚å½“ä½ åœæ­¢æ€ç»´å™ªéŸ³ï¼Œå®‰ä½å½“ä¸‹ï¼Œæ›´æ·±çš„æ™ºæ…§ä¼šè‡ªç„¶æ¶Œç°ã€‚æœ€ä½³ç­”æ¡ˆå¸¸åœ¨"ä¸çŸ¥é“"çš„ç©ºé—´ä¸­å‡ºç°ã€‚',
            category: 'understanding'
        },
        {
            id: 'insight16',
            title: 'å¹³å‡¡æ—¶åˆ»çš„ç¥åœ£æ€§',
            en: 'The Now is as it is because it cannot be otherwise.',
            zh: 'å½“ä¸‹å°±æ˜¯å¦‚æ­¤ï¼Œå› ä¸ºå®ƒä¸å¯èƒ½æ˜¯åˆ«çš„æ ·å­ã€‚',
            analysis: 'æˆ‘ä»¬åœ¨æ—¥å¸¸çäº‹ä¸­ç­‰å¾…"é‡è¦æ—¶åˆ»"ã€‚æ‰˜åˆ©æŒ‡å‡ºï¼šæ´—ç¢—ã€èµ°è·¯ã€å‘¼å¸ï¼Œæ¯ä¸ªå½“ä¸‹éƒ½åŒç­‰é‡è¦ã€‚ç¥åœ£ä¸åœ¨ç‰¹æ®Šä½“éªŒï¼Œè€Œåœ¨å¯¹å¹³å‡¡çš„å…¨ç„¶ä¸´åœ¨ã€‚è¿™é¢ è¦†äº†"æ„ä¹‰"çš„æ•´ä¸ªæ¦‚å¿µã€‚',
            category: 'integration'
        },
        {
            id: 'insight17',
            title: 'å…³ç³»å³ä¿®è¡Œ',
            en: 'If you are not in a state of acceptance, enjoyment or enthusiasm, look closely and you will find that you are creating suffering.',
            zh: 'å¦‚æœä½ ä¸å¤„äºæ¥çº³ã€äº«å—æˆ–çƒ­æƒ…çš„çŠ¶æ€ï¼Œä»”ç»†è§‚å¯Ÿå°±ä¼šå‘ç°ä½ åœ¨åˆ›é€ ç—›è‹¦ã€‚',
            analysis: 'å…³ç³»ä¸­çš„å†²çªè¢«è§†ä¸ºå¯¹æ–¹çš„é—®é¢˜ã€‚æ‰˜åˆ©æŒ‡å‡ºï¼šå…³ç³»æ˜¯ç…§è§å°æˆ‘çš„é•œå­ã€‚æ¯æ¬¡æƒ…ç»ªååº”éƒ½æ˜¯ç»ƒä¹ ä¸´åœ¨çš„æœºä¼šã€‚å¯¹æ–¹ä¸æ˜¯éšœç¢ï¼Œè€Œæ˜¯ä½ è§‰é†’çš„åŠ©ç¼˜ã€‚',
            category: 'integration'
        },
        {
            id: 'insight18',
            title: 'å–œæ‚¦çš„æœ¬è´¨',
            en: 'Joy does not come from what you do, it flows into what you do from deep within you.',
            zh: 'å–œæ‚¦ä¸æ¥è‡ªä½ æ‰€åšçš„äº‹ï¼Œè€Œæ˜¯ä»ä½ å†…åœ¨æ·±å¤„æµå…¥ä½ æ‰€åšçš„äº‹ã€‚',
            analysis: 'æˆå°±ç¤¾ä¼šè®¤ä¸ºï¼šåšå¯¹çš„äº‹â†’è·å¾—å¿«ä¹ã€‚æ‰˜åˆ©é¢ è¦†ï¼šå…ˆè¿æ¥å†…åœ¨å–œæ‚¦â†’åšä»»ä½•äº‹éƒ½æœ‰å–œæ‚¦ã€‚å¿«ä¹ä¾èµ–å¤–åœ¨ï¼Œå–œæ‚¦æºè‡ªæœ¬ä½“ã€‚è¿™è§£é‡Šäº†ä¸ºä»€ä¹ˆæˆåŠŸåä»ç©ºè™šã€‚',
            category: 'understanding'
        },
        {
            id: 'insight19',
            title: 'è´Ÿé¢æ€§çš„æ— ç”¨',
            en: 'Negativity is never the optimal way of dealing with any situation.',
            zh: 'è´Ÿé¢æ€§ä»æ¥ä¸æ˜¯å¤„ç†ä»»ä½•æƒ…å†µçš„æœ€ä¼˜æ–¹å¼ã€‚',
            analysis: 'æˆ‘ä»¬ç›¸ä¿¡è´Ÿé¢æƒ…ç»ªæœ‰ç”¨ï¼ˆæ„¤æ€’ç»™åŠ›é‡ã€æ‹…å¿§é˜²é—®é¢˜ï¼‰ã€‚æ‰˜åˆ©æ–­è¨€ï¼šè´Ÿé¢æ€§åªä¼šè’™è”½æ¸…æ™°ã€æ¶ˆè€—èƒ½é‡ã€‚çœŸæ­£æœ‰æ•ˆçš„è¡ŒåŠ¨æ¥è‡ªä¸´åœ¨çš„æ¸…æ˜ï¼Œè€Œéæƒ…ç»ªçš„é©±åŠ¨ã€‚',
            category: 'practice'
        },
        {
            id: 'insight20',
            title: 'æœ¬ä½“çš„æ°¸æ’åœ¨åœº',
            en: 'Being can be felt, but it can never be understood mentally.',
            zh: 'æœ¬ä½“å¯ä»¥è¢«æ„ŸçŸ¥ï¼Œä½†æ°¸è¿œæ— æ³•è¢«å¤´è„‘ç†è§£ã€‚',
            analysis: 'ç†æ€§æ–‡åŒ–è¦æ±‚"ç†è§£ä¸€åˆ‡"ã€‚æ‰˜åˆ©æŒ‡å‡ºï¼šæœ€æ ¹æœ¬çš„çœŸç†ï¼ˆæœ¬ä½“/æ„è¯†æœ¬èº«ï¼‰è¶…è¶Šæ¦‚å¿µã€‚ä½ æ— æ³•ç†è§£æ°´æ˜¯ä»€ä¹ˆï¼Œä½†ä½ å¯ä»¥å–æ°´ã€æ¸¸æ³³ã€‚åŒæ ·ï¼Œä½ æ— æ³•æ¦‚å¿µåŒ–æœ¬ä½“ï¼Œä½†å¯ä»¥ä½œä¸ºæœ¬ä½“å­˜åœ¨ã€‚',
            category: 'foundation'
        }
    ]
};
// æ ¸å¿ƒæ¦‚å¿µæ•°æ®
const CONCEPTS_DATA = {
    presence: {
        id: 'presence',
        name: { zh: 'ä¸´åœ¨', en: 'Presence' },
        importance: 5,
        description: 'è¶…è¶Šæ€ç»´çš„çº¯ç²¹è§‰çŸ¥',
        dependencies: [],
        
        experienceHook: {
            title: 'å…ˆä½“éªŒä¸€ä¸‹',
            text: `åœ¨è§£é‡Šä¹‹å‰ï¼Œå…ˆä½“éªŒ30ç§’ã€‚

æ”¾æ¾...
æ„Ÿå—ä½ çš„å³æ‰‹
ä¸æ˜¯æƒ³å®ƒï¼Œè€Œæ˜¯ä»å†…éƒ¨æ„Ÿå—å®ƒ

èƒ½æ„Ÿè§‰åˆ°å¾®å¾®çš„åˆºéº»æ„Ÿå—ï¼Ÿ
é‚£ä¸ªèƒ½æ„Ÿè§‰åˆ°çš„ï¼Œå°±æ˜¯ä¸´åœ¨`,
            duration: 30
        },
        
        contrast: {
            wrong: 'å¼ºè¡Œä¸“æ³¨',
            right: 'è‡ªç„¶è§‰çŸ¥',
            wrongExample: 'å’¬ç´§ç‰™å…³ï¼Œå‘Šè¯‰è‡ªå·±"æˆ‘è¦ä¸“æ³¨ï¼ä¸èƒ½èµ°ç¥ï¼"',
            rightExample: 'è½»æŸ”åœ°æ„Ÿå—å‘¼å¸ï¼Œå¦‚æœèµ°ç¥äº†ï¼Œæ¸©æŸ”åœ°å›æ¥',
            insight: 'ä¸´åœ¨ä¸æ˜¯"ç”¨åŠ›"ï¼Œè€Œæ˜¯"æ”¾æ¾è¿›å…¥"'
        },
        
        misconceptions: [
            { myth: 'ä¸´åœ¨æ˜¯ä¸€ç§ç‰¹æ®Šçš„ç¥ç§˜ä½“éªŒ', truth: 'ä¸´åœ¨æ˜¯ä½ çš„è‡ªç„¶çŠ¶æ€' },
            { myth: 'æˆ‘è¦"è·å¾—"ä¸´åœ¨', truth: 'ä½ è¦"åœæ­¢é®è”½"ä¸´åœ¨' },
            { myth: 'ä¸´åœ¨æ—¶ä¸èƒ½æ€è€ƒ', truth: 'ä¸´åœ¨æ—¶å¯ä»¥æ€è€ƒï¼Œä½†ä¸è¢«æ€ç»´æ§åˆ¶' }
        ],
        
        personalizedContent: {
            NT: `## ä¸´åœ¨çš„é€»è¾‘æ¡†æ¶

å‰æ1ï¼šä½ èƒ½è§‚å¯Ÿæ€ç»´
å‰æ2ï¼šè§‚å¯Ÿè€… â‰  è¢«è§‚å¯Ÿå¯¹è±¡
æ¨è®º1ï¼šä½  â‰  æ€ç»´

å‰æ3ï¼šæ€ç»´æ´»åœ¨æ—¶é—´ä¸­ï¼ˆè¿‡å»/æœªæ¥ï¼‰
å‰æ4ï¼šè§‚å¯Ÿè€…åªåœ¨å½“ä¸‹
æ¨è®º2ï¼šçœŸæ­£çš„ä½ åªåœ¨å½“ä¸‹

ç»“è®ºï¼šä¸´åœ¨æ˜¯ä½ çš„æœ¬æ¥é¢ç›®`,
            
            NF: `## ä¸´åœ¨ï¼šå›å®¶çš„æ„Ÿè§‰

æƒ³è±¡ä½ åœ¨å¤–é¢å¥”æ³¢äº†ä¸€æ•´å¤©...
ç–²æƒ«åœ°æ¨å¼€å®¶é—¨
é‚£ä¸€åˆ»ï¼šè‚©è†€æ”¾ä¸‹äº†ï¼Œå‘¼å¸æ·±äº†

ä¸´åœ¨å°±æ˜¯è¿™ç§æ„Ÿè§‰
ä¸æ˜¯å»å¾€æŸä¸ªåœ°æ–¹
è€Œæ˜¯å›åˆ°ä½ ä¸€ç›´åœ¨çš„åœ°æ–¹`,
            
            ST: `## ä¸´åœ¨å®ç”¨æŒ‡å—

å¦‚ä½•è¯†åˆ«ï¼š
âœ“ å‘¼å¸è‡ªç„¶å˜æ·±
âœ“ è‚©è†€æ”¾æ¾
âœ“ æ€ç»´æ”¾æ…¢

å¿«é€Ÿè¿›å…¥æ–¹æ³•ï¼š
1. æ·±å‘¼å¸3æ¬¡ï¼ˆ30ç§’ï¼‰
2. æ„Ÿå—è„šè¸©åœ¨åœ°ä¸Š
3. å¬å‘¨å›´å£°éŸ³`,
            
            SP: `## ä¸´åœ¨çš„æ„Ÿè§‰

è§†è§‰ï¼šé¢œè‰²æ›´é²œè‰³ï¼Œåƒç¬¬ä¸€æ¬¡çœ‹è§
å¬è§‰ï¼šå£°éŸ³æœ‰ç«‹ä½“æ„Ÿ
è§¦è§‰ï¼šèƒ½æ„Ÿå—åˆ°å¾®å¾®çš„èƒ½é‡æ„Ÿ
æ€ç»´ï¼šå¿µå¤´å˜æ…¢ï¼Œåƒæ…¢é•œå¤´`
        }
    },
    
    ego: {
        id: 'ego',
        name: { zh: 'å°æˆ‘', en: 'Ego' },
        importance: 5,
        description: 'è™šå‡çš„è‡ªæˆ‘è®¤åŒ',
        dependencies: ['presence'],
        
        contrast: {
            wrong: 'å°æˆ‘æ˜¯åçš„æˆ‘',
            right: 'å°æˆ‘æ˜¯è™šå‡çš„æˆ‘',
            wrongExample: 'æˆ‘çš„è´ªå©ª/å«‰å¦’æ˜¯å°æˆ‘ï¼ˆé“å¾·åˆ¤æ–­ï¼‰',
            rightExample: 'è®¤ä¸º"æˆ‘å°±æ˜¯æˆ‘çš„æƒ…ç»ª"æ˜¯å°æˆ‘ï¼ˆè®¤åŒé”™è¯¯ï¼‰',
            insight: 'å°æˆ‘ä¸æ˜¯ä½ çš„æŸä¸ªéƒ¨åˆ†ï¼Œè€Œæ˜¯ä¸€ä¸ªè®¤åŒé”™è¯¯'
        },
        
        misconceptions: [
            { myth: 'å°æˆ‘æ˜¯åçš„ï¼Œè¦æ¶ˆç­å®ƒ', truth: 'å°æˆ‘æ˜¯å¹»è§‰ï¼Œä¸èƒ½æ¶ˆç­ä¸å­˜åœ¨çš„ä¸œè¥¿' },
            { myth: 'å°æˆ‘æ˜¯è‡ªç§çš„é‚£éƒ¨åˆ†', truth: 'å°æˆ‘æ˜¯è™šå‡çš„è‡ªæˆ‘è®¤åŒ' },
            { myth: 'æ²¡æœ‰å°æˆ‘å°±æ²¡æœ‰ä¸ªæ€§', truth: 'æ²¡æœ‰å°æˆ‘æ›´çœŸå®' }
        ],
        
        personalizedContent: {
            NT: `## å°æˆ‘çš„é€»è¾‘åˆ†æ

å°æˆ‘ = ä¸æ€ç»´/æƒ…ç»ª/ç»å†çš„è®¤åŒ
å…¬å¼ï¼šå°æˆ‘è¯´"æˆ‘æ˜¯X"ï¼ˆXæ˜¯å¤–åœ¨çš„ï¼‰

ä¾‹å­ï¼š
Ã— "æˆ‘æ˜¯å¤±è´¥è€…"ï¼ˆè®¤åŒï¼‰
âœ“ "æˆ‘ç»å†äº†å¤±è´¥"ï¼ˆè§‚å¯Ÿï¼‰

è¯†åˆ«ï¼šå½“ä½ æ„Ÿåˆ°è¢«æ”»å‡»æ—¶ï¼Œæ˜¯å°æˆ‘`,
            
            NF: `## å°æˆ‘ï¼šä¸€ä¸ªä¼ªè£…

å°æˆ‘åƒæ˜¯æˆ´ç€çš„é¢å…·
ä½ ä»¥ä¸ºé¢å…·å°±æ˜¯ä½ 
ä½†å½“ä½ æ‘˜ä¸‹é¢å…·
ä½ è¿˜åœ¨ï¼Œæ›´çœŸå®

å°æˆ‘éœ€è¦æˆå‰§æ€§
éœ€è¦é—®é¢˜ã€å†²çª
æ¥è¯æ˜è‡ªå·±å­˜åœ¨`,
            
            ST: `## è¯†åˆ«å°æˆ‘çš„æ–¹æ³•

è§¦å‘ç‚¹ï¼š
- è¢«æ‰¹è¯„/å¦å®š
- è¢«å¿½è§†
- å¤±è´¥/æŒ«æŠ˜
- æ¯”è¾ƒ

æ¨¡å¼ï¼š
- å—å®³è€…ï¼š"ä¸ºä»€ä¹ˆæ€»æ˜¯æˆ‘"
- å¯¹æŠ—ï¼š"æˆ‘è¦è¯æ˜ä»–ä»¬é”™äº†"
- ä¼˜è¶Šï¼š"æˆ‘æ¯”ä»–ä»¬å¼º"`,
            
            SP: `## å°æˆ‘çš„æ„Ÿè§‰

èº«ä½“ä¿¡å·ï¼š
- èƒ¸å£ç´§
- å‘¼å¸æµ…
- æ‹³å¤´ç´§æ¡
- è„¸å‘çƒ­

æƒ…ç»ªä¿¡å·ï¼š
- çªç„¶çš„æ„¤æ€’
- å¼ºçƒˆçš„é˜²å¾¡
- æƒ³è¦åå‡»`
        }
    },
    
    now: {
        id: 'now',
        name: { zh: 'å½“ä¸‹', en: 'The Now' },
        importance: 5,
        description: 'å”¯ä¸€çœŸå®çš„æ—¶åˆ»',
        dependencies: [],
        
        contrast: {
            wrong: 'æƒ³ç€"ç°åœ¨"',
            right: 'åœ¨"ç°åœ¨"',
            wrongExample: 'æˆ‘è¦æ´»åœ¨å½“ä¸‹ï¼ï¼ˆè¿™æ˜¯æ€ç»´ï¼‰',
            rightExample: 'æ„Ÿå—è„šè¸©åœ¨åœ°ä¸Š...ï¼ˆç›´æ¥ä½“éªŒï¼‰',
            insight: 'å½“ä¸‹ä¸æ˜¯æ—¶é—´ï¼Œæ˜¯æ„è¯†çš„è´¨é‡'
        },
        
        misconceptions: [
            { myth: 'å½“ä¸‹å°±æ˜¯æ­¤åˆ»è¿™ä¸ªæ—¶é—´', truth: 'å½“ä¸‹æ˜¯è¶…è¶Šæ—¶é—´çš„ç»´åº¦' },
            { myth: 'æ´»åœ¨å½“ä¸‹å°±æ˜¯åŠæ—¶è¡Œä¹', truth: 'æ´»åœ¨å½“ä¸‹æ˜¯ä¸è¢«æ€ç»´å¸¦èµ°' },
            { myth: 'æ´»åœ¨å½“ä¸‹å°±æ˜¯ä¸è®¡åˆ’æœªæ¥', truth: 'å¯ä»¥åœ¨å½“ä¸‹è®¡åˆ’ï¼Œä½†ä¸æ´»åœ¨æœªæ¥' }
        ]
    },
    
    watching_thinker: {
        id: 'watching_thinker',
        name: { zh: 'è§‚å¯Ÿæ€ç»´', en: 'Watching the Thinker' },
        importance: 4,
        description: 'è§‚å¯Ÿå¿µå¤´è€Œéè®¤åŒ',
        dependencies: ['presence'],
        
        contrast: {
            wrong: 'åˆ†ææ€ç»´å†…å®¹',
            right: 'è§‚å¯Ÿæ€ç»´è¿‡ç¨‹',
            wrongExample: 'æƒ³ï¼š"ä¸ºä»€ä¹ˆæˆ‘ä¼šè¿™ä¹ˆæƒ³ï¼Ÿ"',
            rightExample: 'çœ‹ç€ï¼š"å“¦ï¼Œåˆä¸€ä¸ªæ‹…å¿ƒçš„å¿µå¤´"',
            insight: 'ä¸æ˜¯åˆ†æå¿µå¤´ï¼Œæ˜¯çœ‹ç€å¿µå¤´æ¥å»'
        }
    },
    
    awareness: {
        id: 'awareness',
        name: { zh: 'è§‰çŸ¥', en: 'Awareness' },
        importance: 5,
        description: 'çº¯ç²¹çš„æ„è¯†',
        dependencies: ['presence'],
        
        contrast: {
            wrong: 'æ€ç»´çš„æ„è¯†',
            right: 'çº¯ç²¹çš„è§‰çŸ¥',
            wrongExample: 'æˆ‘åœ¨æƒ³ä»€ä¹ˆ',
            rightExample: 'è§‰çŸ¥åˆ°æ€ç»´åœ¨æƒ³',
            insight: 'è§‰çŸ¥æ˜¯å®¹å™¨ï¼Œæ€ç»´æ˜¯å†…å®¹'
        }
    }
};

// æ¸¸æˆæ•°æ®
const GAMES_DATA = {
    thinking_observer: {
        id: 'thinking_observer',
        name: 'æ€ç»´è§‚å¯Ÿè€…',
        concept: 'watching_thinker',
        duration: 90,
        description: 'ä½“éªŒ"è§‚å¯Ÿ"vs"è®¤åŒ"å¿µå¤´çš„å·®åˆ«',
        
        thoughts: {
            ego: [
                'æˆ‘åº”è¯¥æ›´åŠªåŠ›',
                'ä»–ä¸ºä»€ä¹ˆä¸å›æˆ‘æ¶ˆæ¯',
                'æˆ‘ä¸å¤Ÿå¥½',
                'è¿™ä¸å…¬å¹³',
                'ä»–ä»¬æ€ä¹ˆçœ‹æˆ‘',
                'æˆ‘åˆæç ¸äº†',
                'éƒ½æ˜¯æˆ‘çš„é”™',
                'æˆ‘æ°¸è¿œåšä¸åˆ°'
            ],
            neutral: [
                'ä»Šå¤©å¤©æ°”ä¸é”™',
                'è¯¥åƒåˆé¥­äº†',
                'çª—å¤–æœ‰åªé¸Ÿ'
            ],
            presence: [
                'æ„Ÿå—æ­¤åˆ»çš„å‘¼å¸',
                'å›åˆ°å½“ä¸‹',
                'è¿™åªæ˜¯ä¸€ä¸ªå¿µå¤´'
            ]
        }
    },
    
    present_moment: {
        id: 'present_moment',
        name: 'å½“ä¸‹ä¹‹é”š',
        concept: 'now',
        duration: 60,
        description: 'ç»ƒä¹ å›åˆ°å½“ä¸‹çš„èƒ½åŠ›',
        
        levels: [
            { name: 'åˆè¯†å½“ä¸‹', duration: 10 },
            { name: 'ä¿æŒä¸´åœ¨', duration: 30 },
            { name: 'æ·±åº¦ä¸´åœ¨', duration: 60 }
        ]
    }
};

// ç»ƒä¹ æ•°æ®
const PRACTICES_DATA = {
    three_breaths: {
        id: 'three_breaths',
        name: '3æ¬¡å‘¼å¸',
        type: 'micro',
        duration: 30,
        concept: 'presence',
        
        steps: [
            { text: 'ç¬¬1æ¬¡å‘¼å¸', duration: 8, focus: 'æ„Ÿå—ç©ºæ°”è¿›å…¥é¼»è…”' },
            { text: 'ç¬¬2æ¬¡å‘¼å¸', duration: 8, focus: 'æ„Ÿå—èƒ¸è…”æ‰©å¼ ' },
            { text: 'ç¬¬3æ¬¡å‘¼å¸', duration: 8, focus: 'æ„Ÿå—æ•´ä¸ªèº«ä½“' }
        ],
        
        completion: 'å¾ˆå¥½ï¼Œä½ åˆšæ‰ä¸´åœ¨äº†30ç§’'
    },
    
    body_scan: {
        id: 'body_scan',
        name: 'å¿«é€Ÿèº«ä½“æ‰«æ',
        type: 'micro',
        duration: 60,
        concept: 'presence',
        
        steps: [
            { text: 'æ„Ÿå—å¤´éƒ¨', duration: 10, focus: 'å¤´çš®ã€è„¸éƒ¨æœ‰ä»€ä¹ˆæ„Ÿè§‰ï¼Ÿ' },
            { text: 'æ„Ÿå—è‚©è†€', duration: 10, focus: 'æœ‰ç´§å¼ å—ï¼Ÿè¯•ç€æ”¾æ¾' },
            { text: 'æ„Ÿå—åŒæ‰‹', duration: 15, focus: 'ä»å†…éƒ¨æ„Ÿå—ï¼Œæœ‰èƒ½é‡æ„Ÿå—ï¼Ÿ' },
            { text: 'æ„Ÿå—åŒè„š', duration: 15, focus: 'è„šåº•æ¥è§¦åœ°é¢çš„æ„Ÿè§‰' },
            { text: 'æ„Ÿå—æ•´ä½“', duration: 10, focus: 'æ•´ä¸ªèº«ä½“ä½œä¸ºèƒ½é‡åœº' }
        ]
    },
    
    single_action: {
        id: 'single_action',
        name: 'ä¸€æ¬¡åªåšä¸€ä»¶äº‹',
        type: 'daily',
        concept: 'presence',
        description: 'é€‰æ‹©ä¸€ä¸ªæ—¥å¸¸æ´»åŠ¨ï¼Œå…¨ç„¶åœ°åšå®ƒ',
        
        examples: [
            { activity: 'æ´—æ‰‹', duration: 20, focus: ['æ°´æ¸©', 'æ°´æµ', 'æ‰‹çš„æ„Ÿè§‰'] },
            { activity: 'èµ°è·¯', duration: 60, focus: ['è„šæ­¥', 'å‘¼å¸', 'èº«ä½“ç§»åŠ¨'] },
            { activity: 'åƒé¥­', duration: 300, focus: ['å‘³é“', 'è´¨åœ°', 'å’€åš¼'] }
        ]
    }
};
// ç”¨æˆ·ç”»åƒç®¡ç†
class UserProfile {
    constructor() {
        this.load();
    }
    
    // ç”Ÿæˆæ–°ç”»åƒ
    static generate(mbti) {
        const profile = {
            mbti: mbti || 'adaptive',
            style: this.deriveStyle(mbti),
            created_at: new Date().toISOString(),
            preferences: {
                practiceLength: null,
                practiceTime: null
            }
        };
        
        return profile;
    }
    
    // ä»MBTIæ¨å¯¼é£æ ¼
    static deriveStyle(mbti) {
        if (!mbti || mbti === 'adaptive') return 'balanced';
        
        const firstLetter = mbti[0];
        const secondLetter = mbti[1];
        
        // NT - ç†æ€§å‹
        if (secondLetter === 'N' && mbti.includes('T')) return 'NT';
        // NF - æƒ…æ„Ÿå‹
        if (secondLetter === 'N' && mbti.includes('F')) return 'NF';
        // ST - å®ç”¨å‹
        if (secondLetter === 'S' && mbti.includes('T')) return 'ST';
        // SP - ä½“éªŒå‹
        if (secondLetter === 'S' && mbti.includes('F')) return 'SP';
        
        return 'balanced';
    }
    
    // åŠ è½½ç”»åƒ
    load() {
        const stored = localStorage.getItem('userProfile');
        if (stored) {
            this.data = JSON.parse(stored);
        } else {
            this.data = null;
        }
    }
    
    // ä¿å­˜ç”»åƒ
    save(profile) {
        this.data = profile;
        localStorage.setItem('userProfile', JSON.stringify(profile));
    }
    
    // è·å–å½“å‰ç”»åƒ
    get() {
        return this.data;
    }
    
    // æ£€æŸ¥æ˜¯å¦å·²è®¾ç½®
    exists() {
        return this.data !== null;
    }
    
    // æ¸…é™¤ç”»åƒ
    clear() {
        this.data = null;
        localStorage.removeItem('userProfile');
    }
}

// ç”¨æˆ·è¿›åº¦ç®¡ç†
class UserProgress {
    constructor() {
        this.load();
    }
    
    // åŠ è½½è¿›åº¦
    load() {
        const stored = localStorage.getItem('userProgress');
        if (stored) {
            this.data = JSON.parse(stored);
        } else {
            this.data = this.createEmpty();
        }
    }
    
    // åˆ›å»ºç©ºè¿›åº¦
    createEmpty() {
        return {
            concepts: {},
            games: {},
            practices: {},
            journey: [],
            tree: {
                level: 1,
                water_count: 0,
                fertilizer_count: 0,
                branches_unlocked: []
            }
        };
    }
    
    // ä¿å­˜è¿›åº¦
    save() {
        localStorage.setItem('userProgress', JSON.stringify(this.data));
    }
    
    // è·å–æ¦‚å¿µè¿›åº¦
    getConceptProgress(conceptId) {
        return this.data.concepts[conceptId] || { level: 0, status: 'not_started' };
    }
    
    // æ›´æ–°æ¦‚å¿µè¿›åº¦
    updateConceptProgress(conceptId, updates) {
        if (!this.data.concepts[conceptId]) {
            this.data.concepts[conceptId] = { level: 0, status: 'not_started', timeline: [] };
        }
        
        Object.assign(this.data.concepts[conceptId], updates);
        this.save();
        
        // æ·»åŠ åˆ°æ—…ç¨‹
        this.addJourneyEvent({
            type: 'concept_progress',
            concept: conceptId,
            ...updates
        });
    }
    
    // è®°å½•æ¸¸æˆ
    recordGame(gameId, result) {
        if (!this.data.games[gameId]) {
            this.data.games[gameId] = { plays: 0, history: [] };
        }
        
        this.data.games[gameId].plays++;
        this.data.games[gameId].history.push({
            timestamp: new Date().toISOString(),
            ...result
        });
        
        this.data.tree.water_count++;
        this.save();
        
        // æ·»åŠ åˆ°æ—…ç¨‹
        this.addJourneyEvent({
            type: 'game_completed',
            game: gameId,
            result
        });
    }
    
    // è®°å½•ç»ƒä¹ 
    recordPractice(practiceId, completed = true) {
        if (!this.data.practices[practiceId]) {
            this.data.practices[practiceId] = { count: 0, completions: 0 };
        }
        
        this.data.practices[practiceId].count++;
        if (completed) {
            this.data.practices[practiceId].completions++;
            this.data.tree.water_count++;
        }
        
        this.data.practices[practiceId].last_done = new Date().toISOString();
        this.save();
        
        // æ·»åŠ åˆ°æ—…ç¨‹
        this.addJourneyEvent({
            type: 'practice_completed',
            practice: practiceId,
            completed
        });
    }
    
    // æ·»åŠ æ—…ç¨‹äº‹ä»¶
    addJourneyEvent(event) {
        this.data.journey.unshift({
            timestamp: new Date().toISOString(),
            ...event
        });
        
        // åªä¿ç•™æœ€è¿‘50æ¡
        if (this.data.journey.length > 50) {
            this.data.journey = this.data.journey.slice(0, 50);
        }
        
        this.save();
    }
    
    // è§£é”æ¦‚å¿µåˆ†æ”¯
    unlockBranch(conceptId) {
        if (!this.data.tree.branches_unlocked.includes(conceptId)) {
            this.data.tree.branches_unlocked.push(conceptId);
            this.data.tree.fertilizer_count++;
            this.save();
        }
    }
    
    // è®¡ç®—æ ‘çš„ç­‰çº§
    calculateTreeLevel() {
        const totalPoints = this.data.tree.water_count + (this.data.tree.fertilizer_count * 3);
        return Math.floor(totalPoints / 10) + 1;
    }
    
    // è·å–æˆé•¿æ ‘æ•°æ®
    getTreeData() {
        this.data.tree.level = this.calculateTreeLevel();
        return this.data.tree;
    }
}
// æ¦‚å¿µè§£é‡Šå¼•æ“
class ConceptExplainer {
    constructor(userProfile, userProgress) {
        this.profile = userProfile;
        this.progress = userProgress;
    }
    
    // æ¸²æŸ“æ¦‚å¿µåˆ—è¡¨
    renderConceptsList(container) {
        container.innerHTML = '';
        
        Object.values(CONCEPTS_DATA).forEach(concept => {
            const progress = this.progress.getConceptProgress(concept.id);
            const card = this.createConceptCard(concept, progress);
            container.appendChild(card);
        });
    }
    
    // åˆ›å»ºæ¦‚å¿µå¡ç‰‡
    createConceptCard(concept, progress) {
        const card = document.createElement('div');
        card.className = 'concept-card';
        card.onclick = () => this.showConceptDetails(concept.id);
        
        // ç­‰çº§ç‚¹
        const levelDots = Array.from({ length: 5 }, (_, i) => {
            return `<span class="level-dot ${i < progress.level ? 'filled' : ''}"></span>`;
        }).join('');
        
        card.innerHTML = `
            <h3>${concept.name.zh}</h3>
            <div class="en-name">${concept.name.en}</div>
            <p class="description">${concept.description}</p>
            <div class="concept-level">${levelDots}</div>
        `;
        
        return card;
    }
    
    // æ˜¾ç¤ºæ¦‚å¿µè¯¦æƒ…
    showConceptDetails(conceptId) {
        const concept = CONCEPTS_DATA[conceptId];
        if (!concept) return;
        
        const modal = document.getElementById('conceptModal');
        const container = document.getElementById('conceptDetails');
        
        container.innerHTML = this.renderConceptContent(concept);
        modal.classList.add('active');
        
        // ç»‘å®šäº‹ä»¶
        this.bindConceptEvents(concept);
    }
    
    // æ¸²æŸ“æ¦‚å¿µå†…å®¹
    renderConceptContent(concept) {
        const profile = this.profile.get();
        const style = profile ? profile.style : 'balanced';
        
        // è·å–ä¸ªæ€§åŒ–å†…å®¹
        const personalizedContent = this.getPersonalizedContent(concept, style);
        
        return `
            <div class="concept-detail">
                <h2>${concept.name.zh} <span class="en-name">${concept.name.en}</span></h2>
                
                ${concept.experienceHook ? `
                    <div class="experience-section">
                        <h3>âœ¨ ${concept.experienceHook.title}</h3>
                        <div class="experience-text">${this.formatText(concept.experienceHook.text)}</div>
                        <button class="primary-btn" id="startExperienceBtn">
                            å¼€å§‹ä½“éªŒ (${concept.experienceHook.duration}ç§’)
                        </button>
                    </div>
                ` : ''}
                
                ${concept.contrast ? `
                    <div class="contrast-section">
                        <h3>ğŸ”„ å…³é”®å¯¹æ¯”</h3>
                        <div class="contrast-grid">
                            <div class="contrast-wrong">
                                <h4>âŒ ä¸æ˜¯</h4>
                                <p><strong>${concept.contrast.wrong}</strong></p>
                                <p class="example">${concept.contrast.wrongExample}</p>
                            </div>
                            <div class="contrast-right">
                                <h4>âœ“ æ˜¯</h4>
                                <p><strong>${concept.contrast.right}</strong></p>
                                <p class="example">${concept.contrast.rightExample}</p>
                            </div>
                        </div>
                        <p class="insight">ğŸ’¡ ${concept.contrast.insight}</p>
                    </div>
                ` : ''}
                
                ${concept.misconceptions ? `
                    <div class="misconceptions-section">
                        <h3>ğŸš« å¸¸è§è¯¯è§£</h3>
                        ${concept.misconceptions.map(m => `
                            <div class="misconception-item">
                                <p class="myth">âŒ è¯¯è§£ï¼š${m.myth}</p>
                                <p class="truth">âœ“ çœŸç›¸ï¼š${m.truth}</p>
                            </div>
                        `).join('')}
                    </div>
                ` : ''}
                
                <div class="personalized-section">
                    <h3>ğŸ“š ä¸ªæ€§åŒ–è§£é‡Š</h3>
                    <div class="personalized-content">${this.formatText(personalizedContent)}</div>
                </div>
                
                <div class="actions-section">
                    <h3>ğŸ¯ ä¸‹ä¸€æ­¥</h3>
                    <div class="action-buttons">
                        <button class="card-btn" data-action="practice" data-practice="three_breaths">
                            åšä¸ªç»ƒä¹ 
                        </button>
                        <button class="card-btn" data-action="game" data-game="thinking_observer">
                            ç©ä¸ªæ¸¸æˆ
                        </button>
                    </div>
                </div>
            </div>
        `;
    }
    
    // è·å–ä¸ªæ€§åŒ–å†…å®¹
    getPersonalizedContent(concept, style) {
        if (concept.personalizedContent) {
            return concept.personalizedContent[style] || concept.personalizedContent.NT || concept.description;
        }
        return concept.description;
    }
    
    // æ ¼å¼åŒ–æ–‡æœ¬ï¼ˆä¿ç•™æ¢è¡Œï¼‰
    formatText(text) {
        return text.split('\n').map(line => line.trim()).filter(line => line).join('<br>');
    }
    
    // ç»‘å®šæ¦‚å¿µäº‹ä»¶
    bindConceptEvents(concept) {
        // ä½“éªŒæŒ‰é’®
        const expBtn = document.getElementById('startExperienceBtn');
        if (expBtn) {
            expBtn.onclick = () => this.startExperience(concept);
        }
        
        // æ“ä½œæŒ‰é’®
        document.querySelectorAll('[data-action]').forEach(btn => {
            btn.onclick = () => {
                const action = btn.dataset.action;
                if (action === 'practice') {
                    const practiceId = btn.dataset.practice;
                    this.closeModal();
                    window.app.showPractice(practiceId);
                } else if (action === 'game') {
                    const gameId = btn.dataset.game;
                    this.closeModal();
                    window.app.showGame(gameId);
                }
            };
        });
    }
    
    // å¼€å§‹ä½“éªŒ
    startExperience(concept) {
        const hook = concept.experienceHook;
        if (!hook) return;
        
        const container = document.getElementById('conceptDetails');
        container.innerHTML = `
            <div class="experience-guide">
                <h2>ä½“éªŒå¼•å¯¼</h2>
                <div class="guide-text">${this.formatText(hook.text)}</div>
                <div class="timer-display">
                    <div class="timer-circle">
                        <span id="timerText">${hook.duration}</span>
                    </div>
                </div>
                <button class="primary-btn" id="completeExpBtn" style="display: none;">
                    ä½“éªŒå®Œæˆ
                </button>
            </div>
        `;
        
        // å¼€å§‹å€’è®¡æ—¶
        this.startTimer(hook.duration, () => {
            document.getElementById('completeExpBtn').style.display = 'block';
            
            // æ›´æ–°è¿›åº¦
            this.progress.updateConceptProgress(concept.id, {
                level: Math.max(1, this.progress.getConceptProgress(concept.id).level),
                status: 'learning'
            });
            
            document.getElementById('completeExpBtn').onclick = () => {
                this.showConceptDetails(concept.id);
            };
        });
    }
    
    // è®¡æ—¶å™¨
    startTimer(seconds, onComplete) {
        const timerText = document.getElementById('timerText');
        let remaining = seconds;
        
        const interval = setInterval(() => {
            remaining--;
            if (timerText) timerText.textContent = remaining;
            
            if (remaining <= 0) {
                clearInterval(interval);
                if (onComplete) onComplete();
            }
        }, 1000);
    }
    
    // å…³é—­æ¨¡æ€æ¡†
    closeModal() {
        document.getElementById('conceptModal').classList.remove('active');
    }
}
// æ¸¸æˆå¼•æ“
class GameEngine {
    constructor(userProgress) {
        this.progress = userProgress;
    }
    
    // æ¸²æŸ“æ¸¸æˆåˆ—è¡¨
    renderGamesList(container) {
        container.innerHTML = '';
        
        Object.values(GAMES_DATA).forEach(game => {
            const card = this.createGameCard(game);
            container.appendChild(card);
        });
    }
    
    // åˆ›å»ºæ¸¸æˆå¡ç‰‡
    createGameCard(game) {
        const card = document.createElement('div');
        card.className = 'game-card';
        card.onclick = () => this.startGame(game.id);
        
        card.innerHTML = `
            <h3>${game.name}</h3>
            <div class="duration-badge">${game.duration}ç§’</div>
            <p>${game.description}</p>
        `;
        
        return card;
    }
    
    // å¼€å§‹æ¸¸æˆ
    startGame(gameId) {
        const game = GAMES_DATA[gameId];
        if (!game) return;
        
        const modal = document.getElementById('gameModal');
        const container = document.getElementById('gameContent');
        
        modal.classList.add('active');
        
        // æ ¹æ®æ¸¸æˆç±»å‹æ¸²æŸ“
        if (gameId === 'thinking_observer') {
            this.startThinkingObserver(container, game);
        } else if (gameId === 'present_moment') {
            this.startPresentMoment(container, game);
        }
    }
    
    // æ€ç»´è§‚å¯Ÿè€…æ¸¸æˆ
    startThinkingObserver(container, game) {
        container.innerHTML = `
            <div class="game-screen">
                <h2>${game.name}</h2>
                <p class="game-intro">
                    ä½ å³å°†çœ‹åˆ°å„ç§"å¿µå¤´"å†’å‡ºæ¥ã€‚<br><br>
                    ğŸ‘† <strong>ç‚¹å‡»</strong> = è®¤åŒè¿™ä¸ªå¿µå¤´<br>
                    ğŸ‘€ <strong>ä¸ç‚¹</strong> = è§‚å¯Ÿè¿™ä¸ªå¿µå¤´<br><br>
                    ä½“éªŒä¸¤ç§æ¨¡å¼çš„å·®åˆ«
                </p>
                
                <div class="game-stats">
                    <div class="stat">è§‚å¯Ÿï¼š<span id="observedCount">0</span></div>
                    <div class="stat">è®¤åŒï¼š<span id="identifiedCount">0</span></div>
                    <div class="timer">â±ï¸ <span id="gameTimer">${game.duration}</span>ç§’</div>
                </div>
                
                <div class="game-area" id="thoughtsArea"></div>
                
                <button class="primary-btn" id="startGameBtn">å¼€å§‹æ¸¸æˆ</button>
                <div id="gameResult" style="display: none;"></div>
            </div>
        `;
        
        document.getElementById('startGameBtn').onclick = () => {
            this.runThinkingObserverGame(game);
        };
    }
    
    // è¿è¡Œæ€ç»´è§‚å¯Ÿè€…æ¸¸æˆ
    runThinkingObserverGame(game) {
        document.getElementById('startGameBtn').style.display = 'none';
        
        const area = document.getElementById('thoughtsArea');
        const stats = {
            observed: 0,
            identified: 0,
            mode: 'normal',
            consecutiveObserves: 0,
            consecutiveClicks: 0
        };
        
        let timeLeft = game.duration;
        const timerEl = document.getElementById('gameTimer');
        
        // å€’è®¡æ—¶
        const timerInterval = setInterval(() => {
            timeLeft--;
            timerEl.textContent = timeLeft;
            
            if (timeLeft <= 0) {
                clearInterval(timerInterval);
                clearInterval(thoughtInterval);
                this.showGameResult(stats, game);
            }
        }, 1000);
        
        // ç”Ÿæˆå¿µå¤´
        const thoughtInterval = setInterval(() => {
            this.spawnThought(area, stats, game);
        }, 3000);
        
        // ç«‹å³ç”Ÿæˆç¬¬ä¸€ä¸ª
        this.spawnThought(area, stats, game);
    }
    
    // ç”Ÿæˆå¿µå¤´æ°”æ³¡
    spawnThought(area, stats, game) {
        const allThoughts = [
            ...game.thoughts.ego,
            ...game.thoughts.neutral,
            ...game.thoughts.presence
        ];
        
        const thoughtText = allThoughts[Math.floor(Math.random() * allThoughts.length)];
        
        const bubble = document.createElement('div');
        bubble.className = 'thought-bubble';
        bubble.textContent = thoughtText;
        bubble.style.left = Math.random() * 80 + '%';
        bubble.style.top = Math.random() * 60 + '%';
        
        let clicked = false;
        
        bubble.onclick = () => {
            if (clicked) return;
            clicked = true;
            
            // è®¤åŒ
            stats.identified++;
            stats.consecutiveClicks++;
            stats.consecutiveObserves = 0;
            
            document.getElementById('identifiedCount').textContent = stats.identified;
            
            bubble.classList.add('identified');
            
            // æ£€æŸ¥æ¨¡å¼
            if (stats.consecutiveClicks >= 5 && stats.mode !== 'ego') {
                stats.mode = 'ego';
                document.body.classList.add('ego-mode');
            }
            
            setTimeout(() => bubble.remove(), 500);
        };
        
        area.appendChild(bubble);
        
        // 5ç§’åè‡ªåŠ¨æ¶ˆå¤±ï¼ˆè§‚å¯Ÿï¼‰
        setTimeout(() => {
            if (!clicked) {
                stats.observed++;
                stats.consecutiveObserves++;
                stats.consecutiveClicks = 0;
                
                document.getElementById('observedCount').textContent = stats.observed;
                
                bubble.classList.add('observed');
                
                // æ£€æŸ¥æ¨¡å¼
                if (stats.consecutiveObserves >= 5 && stats.mode !== 'presence') {
                    stats.mode = 'presence';
                    document.body.classList.remove('ego-mode');
                    document.body.classList.add('presence-mode');
                }
                
                setTimeout(() => bubble.remove(), 500);
            }
        }, 5000);
    }
    
    // æ˜¾ç¤ºæ¸¸æˆç»“æœ
    showGameResult(stats, game) {
        document.getElementById('thoughtsArea').style.display = 'none';
        const resultEl = document.getElementById('gameResult');
        resultEl.style.display = 'block';
        
        const total = stats.observed + stats.identified;
        const observeRate = total > 0 ? Math.round((stats.observed / total) * 100) : 0;
        
        let insight = '';
        if (stats.identified > stats.observed) {
            insight = 'ä½ æ›´å€¾å‘äºè®¤åŒå¿µå¤´ã€‚è¿™å¾ˆæ­£å¸¸ï¼Œå¤šæ•°äººéƒ½è¿™æ ·ã€‚å…³é”®æ˜¯å¼€å§‹è§‰å¯Ÿã€‚';
        } else if (stats.observed > stats.identified * 2) {
            insight = 'å¾ˆå¥½ï¼ä½ ä½“éªŒåˆ°äº†è§‚å¯Ÿçš„åŠ›é‡ã€‚é‚£ç§æ¸…æ˜çš„æ„Ÿè§‰ï¼Œè®°ä½å®ƒã€‚';
        } else {
            insight = 'ä½ åœ¨è§‚å¯Ÿå’Œè®¤åŒä¹‹é—´å–å¾—äº†å¹³è¡¡ã€‚ç»§ç»­ç»ƒä¹ ï¼Œä¼šè¶Šæ¥è¶Šç†Ÿç»ƒã€‚';
        }
        
        resultEl.innerHTML = `
            <h3>æ¸¸æˆç»“æœ</h3>
            <div class="result-stats">
                <div class="result-item">
                    <span class="result-label">è§‚å¯Ÿ</span>
                    <span class="result-value">${stats.observed}</span>
                </div>
                <div class="result-item">
                    <span class="result-label">è®¤åŒ</span>
                    <span class="result-value">${stats.identified}</span>
                </div>
                <div class="result-item">
                    <span class="result-label">è§‚å¯Ÿç‡</span>
                    <span class="result-value">${observeRate}%</span>
                </div>
            </div>
            
            <div class="result-insight">
                <p>${insight}</p>
            </div>
            
            <div class="result-actions">
                <button class="primary-btn" onclick="location.reload()">å†ç©ä¸€æ¬¡</button>
                <button class="card-btn" onclick="document.getElementById('gameModal').classList.remove('active')">
                    è¿”å›
                </button>
            </div>
        `;
        
        // è®°å½•æ¸¸æˆ
        this.progress.recordGame(game.id, {
            observed: stats.observed,
            identified: stats.identified,
            mode: stats.mode
        });
        
        // æ¸…ç†æ¨¡å¼
        document.body.classList.remove('ego-mode', 'presence-mode');
    }
    
    // å½“ä¸‹ä¹‹é”šæ¸¸æˆ
    startPresentMoment(container, game) {
        container.innerHTML = `
            <div class="game-screen">
                <h2>${game.name}</h2>
                <p class="game-intro">
                    ä¸­å¤®çš„åœ†åœˆä»£è¡¨"å½“ä¸‹"ã€‚<br>
                    å‘¨å›´çš„å¹²æ‰°ä»£è¡¨"æ€ç»´çš„æ‹‰æ‰¯"ã€‚<br><br>
                    æŒç»­å…³æ³¨ä¸­å¤®çš„åœ†åœˆ<br>
                    å½“æ³¨æ„åŠ›è¢«æ‹‰èµ°æ—¶ï¼Œè½»è§¦å±å¹•å›æ¥
                </p>
                
                <div class="level-selector">
                    ${game.levels.map((level, i) => `
                        <button class="level-btn" data-level="${i}">
                            ${level.name} (${level.duration}ç§’)
                        </button>
                    `).join('')}
                </div>
            </div>
        `;
        
        document.querySelectorAll('.level-btn').forEach(btn => {
            btn.onclick = () => {
                const levelIndex = parseInt(btn.dataset.level);
                this.runPresentMomentGame(game, levelIndex);
            };
        });
    }
    
    // è¿è¡Œå½“ä¸‹ä¹‹é”šæ¸¸æˆ
    runPresentMomentGame(game, levelIndex) {
        const level = game.levels[levelIndex];
        const container = document.getElementById('gameContent');
        
        container.innerHTML = `
            <div class="present-moment-game">
                <h3>${level.name}</h3>
                <div class="breathing-circle-container">
                    <div class="breathing-circle"></div>
                </div>
                <div class="distraction-area" id="distractionArea"></div>
                <div class="game-timer">â±ï¸ <span id="pmTimer">${level.duration}</span>ç§’</div>
                <p class="hint">ä¸“æ³¨äºå‘¼å¸åœ†åœˆ...</p>
            </div>
        `;
        
        let distractedCount = 0;
        let timeLeft = level.duration;
        
        // å€’è®¡æ—¶
        const timerInterval = setInterval(() => {
            timeLeft--;
            document.getElementById('pmTimer').textContent = timeLeft;
            
            if (timeLeft <= 0) {
                clearInterval(timerInterval);
                clearInterval(distractionInterval);
                this.showPresentMomentResult(distractedCount, level);
            }
        }, 1000);
        
        // ç”Ÿæˆå¹²æ‰°
        const distractionInterval = setInterval(() => {
            this.spawnDistraction(distractedCount);
        }, 5000);
        
        // ç‚¹å‡»å›åˆ°å½“ä¸‹
        document.querySelector('.breathing-circle-container').onclick = () => {
            document.body.classList.remove('distracted');
        };
    }
    
    // ç”Ÿæˆå¹²æ‰°
    spawnDistraction(count) {
        const distractions = [
            'æ™šé¥­åƒä»€ä¹ˆï¼Ÿ',
            'æ˜å¤©è¦åš...',
            'ä½ è¿˜è®°å¾—...',
            'å¦‚æœ...'
        ];
        
        const area = document.getElementById('distractionArea');
        const text = distractions[Math.floor(Math.random() * distractions.length)];
        
        const distraction = document.createElement('div');
        distraction.className = 'distraction-text';
        distraction.textContent = text;
        distraction.style.left = Math.random() * 80 + '%';
        distraction.style.top = Math.random() * 20 + '%';
        
        area.appendChild(distraction);
        
        document.body.classList.add('distracted');
        
        setTimeout(() => distraction.remove(), 3000);
    }
    
    // æ˜¾ç¤ºå½“ä¸‹ä¹‹é”šç»“æœ
    showPresentMomentResult(distractedCount, level) {
        const container = document.getElementById('gameContent');
        
        let message = '';
        if (distractedCount < 3) {
            message = 'å¤ªæ£’äº†ï¼ä½ ä¿æŒäº†å¾ˆå¥½çš„ä¸´åœ¨ã€‚';
        } else if (distractedCount < 6) {
            message = 'ä¸é”™ï¼åˆ†å¿ƒæ˜¯æ­£å¸¸çš„ï¼Œå…³é”®æ˜¯èƒ½å›æ¥ã€‚';
        } else {
            message = 'ç»§ç»­ç»ƒä¹ ï¼Œä½ ä¼šè¶Šæ¥è¶Šç†Ÿç»ƒã€‚';
        }
        
        container.innerHTML = `
            <div class="game-result">
                <h3>å®Œæˆ ${level.name}!</h3>
                <p>${message}</p>
                <div class="result-actions">
                    <button class="primary-btn" onclick="location.reload()">ç»§ç»­æŒ‘æˆ˜</button>
                    <button class="card-btn" onclick="document.getElementById('gameModal').classList.remove('active')">
                        è¿”å›
                    </button>
                </div>
            </div>
        `;
        
        this.progress.recordGame('present_moment', {
            level: level.name,
            distracted: distractedCount
        });
    }
}
// ç»ƒä¹ ç®¡ç†å™¨
class PracticeManager {
    constructor(userProgress) {
        this.progress = userProgress;
    }
    
    // æ¸²æŸ“ç»ƒä¹ åˆ—è¡¨
    renderPracticesList(container) {
        container.innerHTML = '';
        
        Object.values(PRACTICES_DATA).forEach(practice => {
            const card = this.createPracticeCard(practice);
            container.appendChild(card);
        });
    }
    
    // åˆ›å»ºç»ƒä¹ å¡ç‰‡
    createPracticeCard(practice) {
        const card = document.createElement('div');
        card.className = 'practice-card';
        card.onclick = () => this.startPractice(practice.id);
        
        card.innerHTML = `
            <h3>${practice.name}</h3>
            <div class="duration-badge">${practice.duration}ç§’</div>
            <p>${practice.description || this.getStepsPreview(practice)}</p>
        `;
        
        return card;
    }
    
    // è·å–æ­¥éª¤é¢„è§ˆ
    getStepsPreview(practice) {
        if (practice.steps && practice.steps.length > 0) {
            return practice.steps.map(s => s.text).join(' â†’ ');
        }
        return 'ç‚¹å‡»å¼€å§‹ç»ƒä¹ ';
    }
    
    // å¼€å§‹ç»ƒä¹ 
    startPractice(practiceId) {
        const practice = PRACTICES_DATA[practiceId];
        if (!practice) return;
        
        const modal = document.getElementById('practiceModal');
        const container = document.getElementById('practiceContent');
        
        modal.classList.add('active');
        
        if (practice.steps) {
            this.runGuidedPractice(container, practice);
        } else {
            this.showPracticeInfo(container, practice);
        }
    }
    
    // è¿è¡Œå¼•å¯¼å¼ç»ƒä¹ 
    runGuidedPractice(container, practice) {
        container.innerHTML = `
            <div class="practice-screen">
                <h2>${practice.name}</h2>
                <p class="practice-duration">æ€»æ—¶é•¿ï¼š${practice.duration}ç§’</p>
                
                <div class="practice-guide" id="practiceGuide">
                    <p class="guide-intro">å‡†å¤‡å¥½äº†å—ï¼Ÿæ”¾æ¾ï¼Œè·Ÿéšå¼•å¯¼...</p>
                </div>
                
                <div class="practice-progress">
                    <div class="progress-bar">
                        <div class="progress-fill" id="practiceProgress"></div>
                    </div>
                    <div class="step-indicator">
                        <span id="currentStep">0</span> / ${practice.steps.length}
                    </div>
                </div>
                
                <button class="primary-btn" id="startPracticeBtn">å¼€å§‹ç»ƒä¹ </button>
                <div id="practiceComplete" style="display: none;"></div>
            </div>
        `;
        
        document.getElementById('startPracticeBtn').onclick = () => {
            this.guidePractice(practice);
        };
    }
    
    // å¼•å¯¼ç»ƒä¹ æµç¨‹
    guidePractice(practice) {
        document.getElementById('startPracticeBtn').style.display = 'none';
        
        const guide = document.getElementById('practiceGuide');
        const progressBar = document.getElementById('practiceProgress');
        const stepIndicator = document.getElementById('currentStep');
        
        let currentStep = 0;
        
        const runStep = () => {
            if (currentStep >= practice.steps.length) {
                this.completePractice(practice);
                return;
            }
            
            const step = practice.steps[currentStep];
            
            guide.innerHTML = `
                <h3>${step.text}</h3>
                <p class="focus-text">${step.focus}</p>
                <div class="step-timer">
                    <div class="timer-circle">
                        <span id="stepTimer">${step.duration}</span>
                    </div>
                </div>
            `;
            
            stepIndicator.textContent = currentStep + 1;
            
            // æ›´æ–°è¿›åº¦æ¡
            const progress = ((currentStep + 1) / practice.steps.length) * 100;
            progressBar.style.width = progress + '%';
            
            // å€’è®¡æ—¶
            let timeLeft = step.duration;
            const timerEl = document.getElementById('stepTimer');
            
            const interval = setInterval(() => {
                timeLeft--;
                if (timerEl) timerEl.textContent = timeLeft;
                
                if (timeLeft <= 0) {
                    clearInterval(interval);
                    currentStep++;
                    setTimeout(runStep, 500);
                }
            }, 1000);
        };
        
        runStep();
    }
    
    // å®Œæˆç»ƒä¹ 
    completePractice(practice) {
        const guide = document.getElementById('practiceGuide');
        const completeEl = document.getElementById('practiceComplete');
        
        guide.style.display = 'none';
        completeEl.style.display = 'block';
        
        completeEl.innerHTML = `
            <div class="practice-completion">
                <div class="completion-icon">âœ¨</div>
                <h3>ç»ƒä¹ å®Œæˆï¼</h3>
                <p>${practice.completion || 'å¾ˆå¥½ï¼Œä½ åˆšæ‰ä¿æŒäº†ä¸´åœ¨'}</p>
                
                <div class="completion-actions">
                    <button class="primary-btn" onclick="location.reload()">å†åšä¸€æ¬¡</button>
                    <button class="card-btn" onclick="document.getElementById('practiceModal').classList.remove('active')">
                        å®Œæˆ
                    </button>
                </div>
            </div>
        `;
        
        // è®°å½•ç»ƒä¹ 
        this.progress.recordPractice(practice.id, true);
    }
    
    // æ˜¾ç¤ºç»ƒä¹ ä¿¡æ¯ï¼ˆéå¼•å¯¼å¼ï¼‰
    showPracticeInfo(container, practice) {
        container.innerHTML = `
            <div class="practice-screen">
                <h2>${practice.name}</h2>
                <p class="practice-description">${practice.description}</p>
                
                ${practice.examples ? `
                    <div class="practice-examples">
                        <h3>ç¤ºä¾‹æ´»åŠ¨ï¼š</h3>
                        ${practice.examples.map(ex => `
                            <div class="example-item">
                                <h4>${ex.activity}</h4>
                                <p>ä¸“æ³¨äºï¼š${ex.focus.join('ã€')}</p>
                                <p class="example-duration">çº¦${ex.duration}ç§’</p>
                            </div>
                        `).join('')}
                    </div>
                ` : ''}
                
                <div class="practice-actions">
                    <button class="primary-btn" onclick="document.getElementById('practiceModal').classList.remove('active')">
                        æˆ‘æ˜ç™½äº†
                    </button>
                </div>
            </div>
        `;
    }
}
// ä¸»åº”ç”¨ - åŒ…å«ä¹¦ç±æ´è§
class PowerOfNowApp {
    constructor() {
        this.userProfile = new UserProfile();
        this.userProgress = new UserProgress();
        this.conceptExplainer = null;
        this.gameEngine = null;
        this.practiceManager = null;
        
        this.init();
    }
    
    init() {
        if (this.userProfile.exists()) {
            this.showHome();
        } else {
            this.showWelcome();
        }
        
        this.conceptExplainer = new ConceptExplainer(this.userProfile, this.userProgress);
        this.gameEngine = new GameEngine(this.userProgress);
        this.practiceManager = new PracticeManager(this.userProgress);
        
        this.bindEvents();
        this.renderBookInsights();
    }
    
    bindEvents() {
        const startBtn = document.getElementById('startBtn');
        if (startBtn) {
            startBtn.onclick = () => this.handleStart();
        }
        
        document.querySelectorAll('.nav-link').forEach(link => {
            link.onclick = () => {
                const view = link.dataset.view;
                this.switchView(view);
            };
        });
        
        document.querySelectorAll('.modal-close').forEach(btn => {
            btn.onclick = () => {
                btn.closest('.modal').classList.remove('active');
            };
        });
        
        document.querySelectorAll('.modal').forEach(modal => {
            modal.onclick = (e) => {
                if (e.target === modal) {
                    modal.classList.remove('active');
                }
            };
        });
        
        document.querySelectorAll('.start-learning-btn').forEach(btn => {
            btn.onclick = () => {
                const card = btn.closest('.concept-card-new');
                if (card && !btn.disabled) {
                    const conceptId = card.dataset.concept;
                    this.conceptExplainer.showConceptDetails(conceptId);
                }
            };
        });
        
        document.querySelectorAll('[data-practice]').forEach(btn => {
            btn.onclick = () => {
                const practiceId = btn.dataset.practice;
                this.showPractice(practiceId);
            };
        });
        
        document.querySelectorAll('[data-game]').forEach(btn => {
            btn.onclick = () => {
                const gameId = btn.dataset.game;
                this.showGame(gameId);
            };
        });
        
        // ä¹¦ç±æ´è§å¯¼èˆª
        document.querySelectorAll('.insight-nav-btn').forEach(btn => {
            btn.onclick = () => {
                const section = btn.dataset.section;
                this.switchInsightSection(section);
            };
        });
    }
    
    handleStart() {
        const mbtiSelect = document.getElementById('mbtiSelect');
        const mbti = mbtiSelect ? mbtiSelect.value : '';
        
        const profile = UserProfile.generate(mbti);
        this.userProfile.save(profile);
        
        this.showHome();
    }
    
    showWelcome() {
        const welcomeScreen = document.getElementById('welcomeScreen');
        const homeScreen = document.getElementById('homeScreen');
        
        if (welcomeScreen) welcomeScreen.classList.add('active');
        if (homeScreen) homeScreen.classList.remove('active');
    }
    
    showHome() {
        const welcomeScreen = document.getElementById('welcomeScreen');
        const homeScreen = document.getElementById('homeScreen');
        
        if (welcomeScreen) welcomeScreen.classList.remove('active');
        if (homeScreen) homeScreen.classList.add('active');
        
        this.updateHomePage();
        this.switchView('book'); // é»˜è®¤æ˜¾ç¤ºç†è§£å…¨ä¹¦
    }
    
    updateHomePage() {
        this.updateConceptCards();
    }
    
    updateConceptCards() {
        const concepts = ['presence', 'watching_thinker', 'ego', 'now', 'awareness'];
        
        concepts.forEach((conceptId, index) => {
            const card = document.querySelector(`.concept-card-new[data-concept="${conceptId}"]`);
            if (!card) return;
            
            const progress = this.userProgress.getConceptProgress(conceptId);
            const statusBadge = card.querySelector('.status-badge');
            const startBtn = card.querySelector('.start-learning-btn');
            
            // ç§»é™¤é”å®šçŠ¶æ€ï¼Œæ‰€æœ‰æ¦‚å¿µéƒ½å¯ä»¥è‡ªç”±å­¦ä¹ 
            card.classList.remove('locked');
            
            if (progress.level >= 3) {
                card.classList.add('completed');
                if (statusBadge) {
                    statusBadge.textContent = 'âœ… å·²å®Œæˆ';
                    statusBadge.className = 'status-badge completed';
                }
                if (startBtn) {
                    startBtn.textContent = 'å¤ä¹ ';
                    startBtn.disabled = false;
                }
            } else if (progress.level > 0) {
                if (statusBadge) {
                    statusBadge.textContent = 'å­¦ä¹ ä¸­';
                    statusBadge.className = 'status-badge learning';
                }
                if (startBtn) {
                    startBtn.textContent = 'ç»§ç»­å­¦ä¹ ';
                    startBtn.disabled = false;
                }
            } else {
                if (statusBadge) {
                    statusBadge.textContent = 'æœªå¼€å§‹';
                    statusBadge.className = 'status-badge not-started';
                }
                if (startBtn) {
                    startBtn.textContent = 'å¼€å§‹å­¦ä¹ ';
                    startBtn.disabled = false;
                }
            }
        });
    }
    
    switchView(viewName) {
        document.querySelectorAll('.view').forEach(view => {
            view.classList.remove('active');
        });
        
        document.querySelectorAll('.nav-link').forEach(link => {
            link.classList.remove('active');
            if (link.dataset.view === viewName) {
                link.classList.add('active');
            }
        });
        
        const targetView = document.getElementById(viewName + 'View');
        if (targetView) {
            targetView.classList.add('active');
        }
        
        this.loadViewContent(viewName);
    }
    
    loadViewContent(viewName) {
        switch (viewName) {
            case 'book':
                // ä¹¦ç±æ´è§å·²ç»åœ¨renderBookInsightsä¸­æ¸²æŸ“
                break;
            case 'learn':
                this.updateConceptCards();
                break;
            case 'tools':
                const gamesList = document.getElementById('gamesList');
                if (gamesList && gamesList.children.length === 0) {
                    this.gameEngine.renderGamesList(gamesList);
                }
                
                const practicesList = document.getElementById('practicesList');
                if (practicesList && practicesList.children.length === 0) {
                    this.practiceManager.renderPracticesList(practicesList);
                }
                break;
        }
    }
    
    showGame(gameId) {
        this.gameEngine.startGame(gameId);
    }
    
    showPractice(practiceId) {
        this.practiceManager.startPractice(practiceId);
    }
    
    // ä¹¦ç±æ´è§ç›¸å…³æ–¹æ³•
    switchInsightSection(sectionName) {
        document.querySelectorAll('.insight-nav-btn').forEach(btn => {
            btn.classList.remove('active');
            if (btn.dataset.section === sectionName) {
                btn.classList.add('active');
            }
        });
        
        document.querySelectorAll('.insight-section').forEach(section => {
            section.classList.remove('active');
        });
        
        const targetSection = document.getElementById(sectionName + 'Section');
        if (targetSection) {
            targetSection.classList.add('active');
        }
    }
    
    renderBookInsights() {
        this.renderChapters();
        this.renderUltimateProposition();
        this.renderArgumentMap();
        this.renderKey20();
    }
    
    renderChapters() {
        const container = document.getElementById('chaptersGrid');
        if (!container) return;
        
        container.innerHTML = BOOK_INSIGHTS.chapters.map(chapter => `
            <div class="chapter-card">
                <div class="chapter-number">${chapter.number}</div>
                <h3>${chapter.title}</h3>
                <div class="chapter-proposition">${chapter.coreProposition}</div>
                <div class="chapter-meta">
                    <div class="chapter-meta-item">
                        <strong>å›ç­”çš„é—®é¢˜ï¼š</strong>${chapter.question}
                    </div>
                    <div class="chapter-meta-item">
                        <strong>é¢ è¦†è§‚ç‚¹ï¼š</strong>${chapter.subversion}
                    </div>
                    <div class="chapter-meta-item">
                        <strong>æ ¸å¿ƒä»·å€¼ï¼š</strong>${chapter.value}
                    </div>
                </div>
            </div>
        `).join('');
    }
    
    renderUltimateProposition() {
        const container = document.getElementById('ultimateContent');
        if (!container) return;
        
        const ultimate = BOOK_INSIGHTS.ultimateProposition;
        
        container.innerHTML = `
            <div class="ultimate-statement">${ultimate.statement}</div>
            <h3 style="color: var(--color-bamboo); margin-bottom: var(--spacing-md);">è¿™ä¸ªå‘½é¢˜çš„å±•å¼€ï¼š</h3>
            <div class="expansion-list">
                ${ultimate.expansion.map(item => `
                    <div class="expansion-item">${item}</div>
                `).join('')}
            </div>
        `;
    }
    
    renderArgumentMap() {
        const startPointEl = document.getElementById('startPoint');
        if (startPointEl) {
            startPointEl.textContent = BOOK_INSIGHTS.argumentMap.startPoint;
        }
        
        const landmarksPath = document.getElementById('landmarksPath');
        if (!landmarksPath) return;
        
        landmarksPath.innerHTML = BOOK_INSIGHTS.argumentMap.landmarks.map(landmark => {
            let content = `
                <div class="landmark-card">
                    <h3 class="landmark-title">${landmark.title}</h3>
                    <div class="landmark-argument">${landmark.argument}</div>
            `;
            
            if (landmark.keyPoints) {
                content += `
                    <h4>æ ¸å¿ƒè®ºè¯</h4>
                    <ul class="key-points">
                        ${landmark.keyPoints.map(point => `<li>${point}</li>`).join('')}
                    </ul>
                `;
            }
            
            if (landmark.insight) {
                content += `<div class="insight-box">ğŸ’¡ ${landmark.insight}</div>`;
            }
            
            if (landmark.experiment) {
                content += `<div class="insight-box">ğŸ§ª æ€æƒ³å®éªŒï¼š${landmark.experiment}</div>`;
            }
            
            if (landmark.practices) {
                content += `
                    <h4>å®è·µè·¯å¾„</h4>
                    <ul class="key-points">
                        ${landmark.practices.map(practice => `<li>${practice}</li>`).join('')}
                    </ul>
                `;
            }
            
            if (landmark.examples) {
                content += `
                    <h4>å…·ä½“ç¤ºä¾‹</h4>
                    <ul class="key-points">
                        ${landmark.examples.map(example => `<li>${example}</li>`).join('')}
                    </ul>
                `;
            }
            
            if (landmark.nextStep) {
                content += `<div class="next-step">â†’ ${landmark.nextStep}</div>`;
            }
            
            content += `</div>`;
            return content;
        }).join('');
    }
    
    renderKey20() {
        const container = document.getElementById('key20Grid');
        if (!container) return;
        
        container.innerHTML = BOOK_INSIGHTS.key20.map((insight, index) => `
            <div class="insight-card">
                <div class="insight-number">${index + 1}</div>
                <h3>${insight.title}</h3>
                <div class="insight-quote">
                    <div class="insight-en">${insight.en}</div>
                    <div class="insight-zh">${insight.zh}</div>
                </div>
                <div class="insight-analysis">${insight.analysis}</div>
                <div class="category-badge">${this.getCategoryLabel(insight.category)}</div>
            </div>
        `).join('');
    }
    
    getCategoryLabel(category) {
        const labels = {
            'foundation': 'åŸºç¡€æ´è§',
            'practice': 'å®è·µæ™ºæ…§',
            'understanding': 'æ·±åº¦ç†è§£',
            'integration': 'ç”Ÿæ´»æ•´åˆ'
        };
        return labels[category] || category;
    }
}

// åˆå§‹åŒ–åº”ç”¨
window.addEventListener('DOMContentLoaded', () => {
    const app = new PowerOfNowApp();
});
    </script>
</body>
</html>
